<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Enable Hot Reload :: OneCX</title>
    <link rel="canonical" href="https://onecx.github.io/docs/documentation/current/getting-started/first-application/enable_hot_reload.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/diagram-js.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/bpmn-font/css/bpmn.css">
    <link rel="stylesheet" href="../../../../_/css/bpmn.css">
    <link href="../../../../_/css/fontawesome.css" rel="stylesheet" />
    <link href="../../../../_/css/brands.css" rel="stylesheet" />
    <link href="../../../../_/css/solid.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui.css">
    <script>var uiRootPath = '../../../../_'</script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/bpmn-js/dist/bpmn-viewer.production.min.js"></script>
    <script src="https://unpkg.com/dmn-js@11.0.2/dist/dmn-viewer.production.min.js"></script>
    <script src="../../../../_/js/bpmn.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-standalone-preset.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-bundle.js"></script>

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://onecx.github.io/docs">OneCX</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/docs">Home</a>
        <!--  <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/docs/docs-guides-quarkus/latest/">Quarkus</a>
            <a class="navbar-item" href="/docs/docs-guides-bpmn/latest/">Bpmn</a>
          </div> 
        </div> -->
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="documentation" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../local-env/index.html">Local Environment</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Local Environment</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#onecx-local-env:local-env:overview.adoc">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../local-env/getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../local-env/setup.html">Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../local-env/extend/extend.html">Extend OneCX</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/extend/local-mfe.html">Local Microfrontend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/extend/local-images.html">Local Images</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scripts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/scripts/start.html">start-onecx.sh</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/scripts/stop.html">stop-onecx.sh</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/scripts/import.html">import-onecx.sh</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/scripts/toggle-mfes.html">toggle-mfes.sh</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/scripts/check-images.html">check-images.sh</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/scripts/update-images.html">update-images.sh</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Versions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">v2 (latest)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../local-env/versions/v2/v2.html">v2 (latest)</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../local-env/versions/v2/migrate.html">Migration Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../local-env/versions/v1/v1.html">v1</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/advanced/default-database.html">Default Databases</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/advanced/imports.html">Default Data &amp; Imports</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../local-env/advanced/networking.html">Networking in OneCX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../local-env/help/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Local Environment</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../onecx-bookmark/current/general/index.html">Bookmark Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-bookmark/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../contribution/current/contribution/index.html">Contribution</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../contribution/current/contribution/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-document-management/current/general/index.html">Document Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-document-management/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-help/current/general/index.html">Help Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-help/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-iam/current/general/index.html">IAM Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-iam/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../local-env/index.html">Local Environment</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../local-env/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-portal-ui-libs/current/general/index.html">OneCX Portal UI Libs</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-portal-ui-libs/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-quarkus/current/onecx-quarkus/index.html">Onecx Quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-quarkus/current/onecx-quarkus/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-parameter/current/general/index.html">Parameter Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-parameter/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-permission/current/general/index.html">Permission Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-permission/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-product-store/current/general/index.html">Product Store Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-product-store/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-shell/current/general/index.html">Shell UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-shell/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-tenant/current/general/index.html">Tenant Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-tenant/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-test/current/general/index.html">Test Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-test/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-theme/current/general/index.html">Theme Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-theme/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-user-profile/current/general/index.html">User Profile Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-user-profile/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-welcome/current/general/index.html">Welcome Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-welcome/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-workspace/current/general/index.html">Workspace Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-workspace/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../local-env/index.html">Local Environment</a></li>
    <li><a href="enable_hot_reload.html">Enable Hot Reload</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/onecx/docs-guides/edit/main/docs/getting-started/modules/getting-started/pages/first-application/enable_hot_reload.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">Enable Hot Reload</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>For development purposes, you can enable hot reload in your local environment. This allows you to see changes in the application immediately without rebuilding the image.
For that we need to adjust the routing configuration in the traefik configurations of the docker image by replacing the labels section of the hello-world-bff service in the <code>hello-world.docker-compose.yaml</code> with the following lines.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">- "traefik.http.routers.local_mfe.entrypoints=web"
- "traefik.http.routers.local_mfe.rule=Host(`local-proxy`)&amp;&amp;PathPrefix(`/mfe/helloWorld/`)"
- "traefik.http.routers.local_mfe.service=local_mfe@file"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>PathPrefix</code> in the traefik label should match the value of APP_BASE_HREF in the environment section of your docker-compose.yaml.
Now, routing is handled directly to your locally running application instead of the Docker container.</p>
</div>
<div class="paragraph">
<p>To make sure, that traefik can access the local application, enhance the <code>npm start</code> script in the applications <code>package.json</code> with <code>--host 0.0.0.0 --disable-host-check</code>.</p>
</div>
<div class="paragraph">
<p>Additionally the PROXY_CONFIG in the <code>proxy.config.js</code> of the UI application needs to be updated like this. Note that the path needs to be adjusted according to the <code>PathPrefix</code> value in the traefik label.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const PROXY_CONFIG = {
  '/mfe/helloWorld': {
    target: 'http://localhost:4200/',
    secure: false,
    pathRewrite: {
      '^.*/mfe/helloWorld': '',
    },
    changeOrigin: true,
    logLevel: 'debug',
    bypass: bypassFn,
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your app runs on the standard port 4200, you can start your application with <code>npm start</code>, restart your containers with <code>docker compose --profile base up -d</code> and every change in the application should be reflected immediately under <code><a href="http://local-proxy/onecx-shell/admin/helloWorld/hello" class="bare">http://local-proxy/onecx-shell/admin/helloWorld/hello</a></code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="note-different-ports"><a class="anchor" href="#note-different-ports"></a>Note for different ports</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your application uses a <strong>port other than 4200</strong>, you need to first update the port in the <code>url</code> field of the <code>local_mfe</code> service in the <code>./init-data/traefik/traefik-services.yml</code> file within your <code>onecx-local-env</code>. Set the port to match the one your application is running on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">local_mfe:
    loadBalancer:
      servers:
      - url: "http://host.docker.internal:4200/"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can start your application with <code>npm start</code> and restart your containers with <code>docker compose --profile base up -d</code>. Every change in the application should be reflected immediately under <code><a href="http://local-proxy/onecx-shell/admin/helloWorld/hello" class="bare">http://local-proxy/onecx-shell/admin/helloWorld/hello</a></code>.</p>
</div>
<div class="paragraph">
<p>If you want to run multiple applications on different ports, see the <a href="run_multiple_apps.html" class="xref page">Running Multiple Local Apps Simultaneously</a> section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="local-changes-not-visible"><a class="anchor" href="#local-changes-not-visible"></a>Local Changes are not Visible</h3>
<div class="paragraph">
<p>If your local changes are not visible in the OneCX Shell, it could be due to issues with the traefik configurations with the global UI container, that might be still running. To resolve this, stop the container with <code>docker compose stop hello-world-ui</code>, so that only your local container is running.</p>
</div>
</div>
<div class="sect2">
<h3 id="angular-ngdevmode-error"><a class="anchor" href="#angular-ngdevmode-error"></a>Angular ngDevMode is not defined Error</h3>
<div class="paragraph">
<p>When running your Angular application, you may see the following error in the browser console:</p>
</div>
<div class="paragraph">
<p><code>hook.js:608 ERROR ReferenceError: ngDevMode is not defined</code></p>
</div>
<div class="paragraph">
<p>This error occurs when the global variable <code>ngDevMode</code>, which Angular uses to enable development mode features, is missing from the runtime environment. This is often due to Webpack not injecting the variable during the build process.</p>
</div>
<div class="paragraph">
<p><strong>How to fix:</strong></p>
</div>
<div class="paragraph">
<p>To resolve this, ensure that <code>ngDevMode</code> is defined in your Webpack configuration. You can do this by using the <code>DefinePlugin</code> to set the value based on your environment.</p>
</div>
<div class="paragraph">
<p>First set the environment variable in your Dockerfile:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-dockerfile hljs" data-lang="dockerfile">ENV NODE_ENV production</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then add the following code to the webpack.config.js:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">const webpack = require('webpack');
const isProduction = process.env.NODE_ENV === 'production';

module.exports = {
  ...
  plugins: [
    new webpack.DefinePlugin({
      ngDevMode: JSON.stringify(!isProduction)
    }),
    ...
  ],
  ...
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>And in your package.json scripts, ensure ngDevMode is set as production in build time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"scripts": {
  "start": "nx serve --host 0.0.0.0 --disable-host-check",
  "build": "NODE_ENV=production nx build"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This setup ensures that <code>ngDevMode</code> is correctly defined for both development and production builds, preventing the error.</p>
</div>
</div>
</div>
</div>
  </article>  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
<script>
    document.addEventListener('readystatechange', event => {
    if (event.target.readyState === "complete") {
        renderAllBpmnJs();
    }
    });    
</script>
  </body>
</html>

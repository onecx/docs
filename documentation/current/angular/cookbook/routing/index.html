<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OneCX Routing :: OneCX Docs</title>
    <link rel="canonical" href="https://onecx.github.io/docs/documentation/current/angular/cookbook/routing/index.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/diagram-js.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/bpmn-font/css/bpmn.css">
    <link rel="stylesheet" href="../../../../../_/css/bpmn.css">
    <link href="../../../../../_/css/fontawesome.css" rel="stylesheet" />
    <link href="../../../../../_/css/brands.css" rel="stylesheet" />
    <link href="../../../../../_/css/solid.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui.css">
    <script>var uiRootPath = '../../../../../_'</script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/bpmn-js/dist/bpmn-viewer.production.min.js"></script>
    <script src="https://unpkg.com/dmn-js@11.0.2/dist/dmn-viewer.production.min.js"></script>
    <script src="../../../../../_/js/bpmn.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-standalone-preset.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-bundle.js"></script>

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://onecx.github.io/docs">OneCX Docs</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/docs">Home</a>
        <!--  <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/docs/docs-guides-quarkus/latest/">Quarkus</a>
            <a class="navbar-item" href="/docs/docs-guides-bpmn/latest/">Bpmn</a>
          </div> 
        </div> -->
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="documentation" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">documentation</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../onecx-announcement/current/index.html">Announcement Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-announcement/current/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-bookmark/current/general/index.html">Bookmark Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-bookmark/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../contribution/current/contribution/index.html">Contribution</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../contribution/current/contribution/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-document-management/current/general/index.html">Document Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-document-management/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../index.html">documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../general-information/current/general/index.html">General Information</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../general-information/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../guides/current/index.html">Guides</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../guides/current/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-help/current/general/index.html">Help Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-help/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-iam/current/general/index.html">IAM Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-iam/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../index/current/index.html">Index</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../index/current/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-portal-ui-libs/current/general/index.html">OneCX Portal UI Libs</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-portal-ui-libs/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-quarkus/current/onecx-quarkus/index.html">Onecx Quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-quarkus/current/onecx-quarkus/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-parameter/current/general/index.html">Parameter Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-parameter/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-permission/current/general/index.html">Permission Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-permission/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-product-store/current/general/index.html">Product Store Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-product-store/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-shell/current/general/index.html">Shell UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-shell/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-tenant/current/general/index.html">Tenant Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-tenant/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-test/current/general/index.html">Test Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-test/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-theme/current/general/index.html">Theme Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-theme/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-user-profile/current/general/index.html">User Profile Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-user-profile/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../utilities/current/general-info/index.html">Utilities</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../utilities/current/general-info/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-welcome/current/general/index.html">Welcome Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-welcome/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-workspace/current/general/index.html">Workspace Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-workspace/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../index/current/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/onecx/docs-guides-ui/edit/main/docs/modules/angular/pages/cookbook/routing/index.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">OneCX Routing</h1>
    <div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In OneCX, there are requirements for routing inside the application as well as routing to other applications or endpoints. It is important to follow these guidelines to ensure that routing is handled correctly within the OneCX ecosystem.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before implementing routing in your OneCX application, ensure your application is <a href="../migrations/vanilla-to-onecx/index.html" class="xref page">OneCX compatible</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reasons-for-restrictions"><a class="anchor" href="#reasons-for-restrictions"></a>Reasons for restrictions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="why-routing-restrictions"><a class="anchor" href="#why-routing-restrictions"></a>Why Routing Restrictions?</h3>
<div class="paragraph">
<p>In OneCX, each application can be accessed via different base paths depending on the workspace configuration. Below are some examples of how <strong>the same application</strong> might be accessed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="https://shell_deployment_path/my-workspace/my-application" class="bare">https://shell_deployment_path/my-workspace/my-application</a></code></p>
</li>
<li>
<p><code><a href="https://shell_deployment_path/employees-workspace/client-management/base" class="bare">https://shell_deployment_path/employees-workspace/client-management/base</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When an application is accessed via OneCX shell, the base path can vary, but every time the common parts are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="https://shell_deployment_path/" class="bare">https://shell_deployment_path/</a></code> - the deployment path of the OneCX shell</p>
</li>
<li>
<p><code>my-workspace</code> or <code>employees-workspace</code> - the workspace identifier</p>
</li>
<li>
<p><code>my-application</code> or <code>client-management/base</code> - the application path</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>What is important to note is that the workspace identifier and application path are not fixed and can be different depending on the workspace that the app is accessed from and the workspace configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="onecx-shell-routing"><a class="anchor" href="#onecx-shell-routing"></a>OneCX Shell Routing</h3>
<div class="paragraph">
<p>OneCX shell handles the routing to the correct application based on the workspace configuration. It handles that on every navigation that changes the active workspace or application.</p>
</div>
<div class="paragraph">
<p>As an example, if any application navigates to <code><a href="https://shell_deployment_path/employees-workspace/client-management/client/123" class="bare">https://shell_deployment_path/employees-workspace/client-management/client/123</a></code>, the OneCX shell will ensure that the <code>employees-workspace</code> is activated and the <code>client-management</code> application is loaded with the correct context. The url parts that OneCX shell handles are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="https://shell_deployment_path/" class="bare">https://shell_deployment_path/</a></code> - the deployment path of the OneCX shell</p>
</li>
<li>
<p><code>employees-workspace</code> - the workspace used to determine which workspace data to load</p>
</li>
<li>
<p><code>client-management</code> - the application path to determine which application to load</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rest of the URL path should be handled by the application itself. In this case, the <code>client/123</code> part should be handled by the <code>client-management</code> application.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Application&#8217;s router <strong>will not be aware of the used parts of the URL that OneCX shell handles</strong>. Therefore, it is required to have appropriate routing mechanisms in order to ensure that the application can handle routing correctly regardless of the workspace configuration.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="general-routing-guidelines"><a class="anchor" href="#general-routing-guidelines"></a>General Routing Guidelines</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="routing-inside-application"><a class="anchor" href="#routing-inside-application"></a>Routing Inside the Application</h3>
<div class="paragraph">
<p>When routing inside the application, it is important to use <strong>relative paths</strong> instead of <strong>absolute paths</strong>. This ensures that the application can handle routing correctly regardless of the workspace configuration.</p>
</div>
<div class="sect3">
<h4 id="routing-inside-application-examples"><a class="anchor" href="#routing-inside-application-examples"></a>Examples</h4>
<div class="sect4">
<h5 id="navigate-to-details-page"><a class="anchor" href="#navigate-to-details-page"></a>Navigate to details page</h5>
<div class="paragraph">
<p>Application is currently at <code><a href="https://shell_deployment_path/employees-workspace/client-management" class="bare">https://shell_deployment_path/employees-workspace/client-management</a></code> and needs to navigate to a client with ID 123, it should use a relative path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">this.router.navigate(['client', 123]);</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="navigate-back"><a class="anchor" href="#navigate-back"></a>Navigate back</h5>
<div class="paragraph">
<p>Application is currently at <code><a href="https://shell_deployment_path/employees-workspace/client-management/client/123" class="bare">https://shell_deployment_path/employees-workspace/client-management/client/123</a></code> and needs to navigate back to the client list, it should use a relative path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">this.router.navigate(['../'], { relativeTo: this.route });</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="routing-using-absolute-paths"><a class="anchor" href="#routing-using-absolute-paths"></a>Routing Using Absolute Paths</h3>
<div class="paragraph">
<p>Sometimes, it might be necessary to use absolute paths for routing. In such cases, it is crucial to construct the absolute path dynamically based on the current workspace configuration. This can be achieved by using the <a href="../../libraries/angular-integration-interface.html#app-state-service" class="xref page">AppStateService</a> to get the currentMfe$, which contains the current workspace and application information.</p>
</div>
<div class="sect3">
<h4 id="routing-using-absolute-paths-examples"><a class="anchor" href="#routing-using-absolute-paths-examples"></a>Examples</h4>
<div class="sect4">
<h5 id="navigate-to-details-page-absolute"><a class="anchor" href="#navigate-to-details-page-absolute"></a>Navigate to details page using absolute path</h5>
<div class="paragraph">
<p>Application is currently at <code><a href="https://shell_deployment_path/employees-workspace/client-management" class="bare">https://shell_deployment_path/employees-workspace/client-management</a></code> and needs to navigate to a client with ID 123 using an absolute path. It should construct the absolute path dynamically.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">import { firstValueFrom } from 'rxjs';
...

appStateService: AppStateService; // Injected via constructor

async routeOnClick() {
    const mfeInfo = await firstValueFrom(this.appStateService.currentMfe$);
    this.router.navigateByUrl(`/${mfeInfo.baseUrl}/client/123`);
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are using ngrx, you can use the <a href="../../libraries/angular-integration-interface.html#app-state-service" class="xref page">AppStateService</a> directly in your effects to construct the absolute path dynamically.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="routing-between-applications"><a class="anchor" href="#routing-between-applications"></a>Routing Between Applications</h3>
<div class="paragraph">
<p>If it is necessary to route between different applications or to specific endpoints, it is recommended to use the <a href="../service/workspace-service/index.html" class="xref page">WorkspaceService</a>.</p>
</div>
<div class="paragraph">
<p>The <a href="../service/workspace-service/index.html" class="xref page">WorkspaceService</a> provides methods to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dynamically construct URLs for applications and endpoints based on the current workspace.</p>
</li>
<li>
<p>Validate whether a route or endpoint exists before navigating.</p>
</li>
<li>
<p>Resolve endpoint aliases and inject parameters into endpoint paths.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This approach ensures that applications remain decoupled from static configurations and are fully integrated into the OneCX workspace model.</p>
</div>
</div>
</div>
</div>
  </article>  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../../_/js/site.js" data-ui-root-path="../../../../../_"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../../.." data-snippet-length="100" data-stylesheet="../../../../../_/css/search.css"></script>
<script async src="../../../../../search-index.js"></script>
<script>
    document.addEventListener('readystatechange', event => {
    if (event.target.readyState === "complete") {
        renderAllBpmnJs();
    }
    });    
</script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OneCX Microfrontend Content Bootstrapping :: OneCX</title>
    <link rel="canonical" href="https://onecx.github.io/docs/documentation/current/implementation-details/bootstrapping.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/diagram-js.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/bpmn-font/css/bpmn.css">
    <link rel="stylesheet" href="../../../_/css/bpmn.css">
    <link href="../../../_/css/fontawesome.css" rel="stylesheet" />
    <link href="../../../_/css/brands.css" rel="stylesheet" />
    <link href="../../../_/css/solid.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui.css">
    <script>var uiRootPath = '../../../_'</script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/bpmn-js/dist/bpmn-viewer.production.min.js"></script>
    <script src="https://unpkg.com/dmn-js@11.0.2/dist/dmn-viewer.production.min.js"></script>
    <script src="../../../_/js/bpmn.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-standalone-preset.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-bundle.js"></script>

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://onecx.github.io/docs">OneCX</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/docs">Home</a>
        <!--  <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/docs/docs-guides-quarkus/latest/">Quarkus</a>
            <a class="navbar-item" href="/docs/docs-guides-bpmn/latest/">Bpmn</a>
          </div> 
        </div> -->
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="documentation" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">OneCX</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../general-information/index.html">Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../general-information/index.html">General</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../general-information/architecture-overview/index.html">Architecture overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../general-information/architecture-overview/frontend.html">Frontend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../general-information/architecture-overview/bff.html">Backend-for-frontend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../general-information/architecture-overview/backend.html">Backend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../general-information/architecture-overview/ci.html">CI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../general-information/architecture-overview/cd.html">CD</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../general-information/architecture-overview/mfe.html">Mfe</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../general-information/architecture-overview/shell.html">Shell</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../general-information/architecture-overview/remote-components.html">Workspace</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../getting-started/index.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../getting-started/local-env-setup/local_env_setup.html">Local Environment Setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../getting-started/first-application/getting_started.html">First Application</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../getting-started/first-application/getting_started.html">Create a new Application</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../getting-started/first-application/running_custom_apps_overview.html">Running and Testing Custom Applications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/first-application/app_setup_cli.html">Automatic App Setup with Local Env CLI</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/first-application/app_setup_manual.html">Manual App Setup</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/first-application/image_build_automatic.html">Automatic Image Build</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/first-application/image_build_manual.html">Manual Image Build</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/first-application/enable_hot_reload.html">Enable Hot Reload</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/first-application/run_multiple_apps.html">Run Multiple Apps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/first-application/testing_existing_core_apps.html">Testing Existing Core Apps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../getting-started/first-application/app_removal.html">Removal of Custom Apps</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../guides/index.html">Guides</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guides/troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Contributions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guides/api_guidelines.html">API Guidelines</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../angular/general/guidelines.html">Angular Guidelines</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Libs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../javascript/migrations/migrate-to-v6.html">Migrate to OneCX version 6</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../javascript/libraries/integration-interface.html">@onecx/integration-interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../angular/libraries/angular-integration-interface.html">@onecx/angular-integration-interface</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../javascript/general/onecx-compatibility.html">OneCX Compatibility</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Implementation Details</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="microfrontend-content-loading.html">Microfrontend Content Loading</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="webcomponents.html">Web Components</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="bootstrapping.html">Microfrontend Bootstrapping</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="webpack.html">Microfrontend Webpack Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../angular/general/index.html">Angular</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cookbooks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/migrations/vanilla-to-onecx/index.html">Migrate vanilla Angular apps to OneCX</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/migrations/enable-standalone/index.html">Enable standalone mode for OneCX apps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/service/portal-message-service/index.html">PortalMessageService</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/service/portal-dialog-service/index.html">PortalDialogService</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/service/workspace-service/index.html">WorkspaceService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/components/page-header/index.html">PageHeader</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/components/group-by-count-diagram/index.html">GroupByCountDiagram</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/components/search-header/index.html">SearchHeader</a>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../angular/cookbook/components/interactive-data-view/index.html">InteractiveDataView</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../angular/cookbook/components/interactive-data-view/data-table-column.html">DataTableColumn</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../angular/cookbook/multi-language/multi-language.html">Multi-language translations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/multi-language/multi-language-setup.html">Multi-language translations setup</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/multi-language/multi-language-usage.html">Multi-language translations usage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../angular/cookbook/toast-messages.html">Toast messages</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../angular/cookbook/theming.html">Theming</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../angular/cookbook/permissions.html">Permissions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../angular/cookbook/routing/index.html">Routing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">PrimeNG</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/cookbook/primeng/theming.html">Theming with PrimeNG</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../angular/ngrx/ngrx.html">NgRx</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cookbooks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../angular/ngrx/cookbook/adding-search-criteria/general.html">Adding Search Criteria</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../angular/ngrx/cookbook/adding-search-criteria/autocomplete/autocomplete.html">AutoComplete</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="7">
    <a class="nav-link" href="../angular/ngrx/cookbook/adding-search-criteria/autocomplete/autocomplete-string.html">AutoComplete with array of type string</a>
  </li>
  <li class="nav-item" data-depth="7">
    <a class="nav-link" href="../angular/ngrx/cookbook/adding-search-criteria/autocomplete/autocomplete-number.html">AutoComplete with array of type number</a>
  </li>
  <li class="nav-item" data-depth="7">
    <a class="nav-link" href="../angular/ngrx/cookbook/adding-search-criteria/autocomplete/autocomplete-object.html">AutoComplete with array of type object</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../angular/ngrx/cookbook/adding-search-criteria/calendar.html">Calendar</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../angular/ngrx/cookbook/adding-search-criteria/dropdown.html">Dropdown</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../angular/ngrx/cookbook/adding-search-criteria/multiselect.html">Multiselect</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../angular/ngrx/cookbook/tabs/lazy-loading.html">Lazy Loading Tabs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Quarkus</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/project-structure.html">Project Structure</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/quarkus-github-actions.html">Project GitHub actions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/quarkus-rest-api.html">Rest API CRUD guidelines</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/quarkus-svc.html">Backend service (svc)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/quarkus-bff.html">Backend for frontends (bff)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/quarkus-operator.html">K8s operator (operator)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">BPMN</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../bpmn/cancel-timer.html">Cancel timer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../bpmn/request-callback.html">Request callback</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../bpmn/messages.html">Messages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../bpmn/open-topics.html">Open topics</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../guides/ai_support.html">AI Support Integration Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../utilities/index.html">Utilities</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Local Environment</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#onecx-local-env:local-env:overview.adoc">Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#local-env:getting-started.adoc">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#documentation:local-env:setup.adoc">Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#documentation:local-env:extend/extend.adoc">Extend OneCX</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:extend/local-mfe.adoc">Local Microfrontend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:extend/local-images.adoc">Local Images</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scripts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/start.adoc">start-onecx.sh</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/stop.adoc">stop-onecx.sh</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/import.adoc">import-onecx.sh</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/toggle-mfes.adoc">toggle-mfes.sh</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/check-images.adoc">check-images.sh</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/update-images.adoc">update-images.sh</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Versions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">v2 (latest)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="#documentation:local-env:versions/v2/v2.adoc">v2 (latest)</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="#documentation:local-env:versions/v2/migrate.adoc">Migration Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#documentation:local-env:versions/v1/v1.adoc">v1</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:advanced/default-database.adoc">Default Databases</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:advanced/imports.adoc">Default Data &amp; Imports</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:advanced/networking.adoc">Networking in OneCX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#documentation:local-env:help/troubleshooting.adoc">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Local Environment</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#onecx-local-env:local-env:overview.adoc">Overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#local-env:getting-started.adoc">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#documentation:local-env:setup.adoc">Setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#documentation:local-env:extend/extend.adoc">Extend OneCX</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:extend/local-mfe.adoc">Local Microfrontend</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:extend/local-images.adoc">Local Images</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scripts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/start.adoc">start-onecx.sh</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/stop.adoc">stop-onecx.sh</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/import.adoc">import-onecx.sh</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/toggle-mfes.adoc">toggle-mfes.sh</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/check-images.adoc">check-images.sh</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:scripts/update-images.adoc">update-images.sh</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Versions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">v2 (latest)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="#documentation:local-env:versions/v2/v2.adoc">v2 (latest)</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="#documentation:local-env:versions/v2/migrate.adoc">Migration Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#documentation:local-env:versions/v1/v1.adoc">v1</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:advanced/default-database.adoc">Default Databases</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:advanced/imports.adoc">Default Data &amp; Imports</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#documentation:local-env:advanced/networking.adoc">Networking in OneCX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#documentation:local-env:help/troubleshooting.adoc">Troubleshooting</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Core Applications</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../onecx-announcement/index.html">Announcement</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../index.html">User Interface</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../onecx-announcement-bff/index.html">Announcement Bff</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../onecx-announcement-svc/index.html">Announcement service</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">External API(s)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../onecx-announcement-svc/openapi/announcement-openapi-v1.html">Announcement Management V1</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OneCX</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../onecx-bookmark/current/general/index.html">Bookmark Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-bookmark/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../contribution/current/contribution/index.html">Contribution</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../contribution/current/contribution/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-document-management/current/general/index.html">Document Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-document-management/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-help/current/general/index.html">Help Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-help/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-iam/current/general/index.html">IAM Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-iam/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-local-env/current/local-env/index.html">Local Environment</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-local-env/current/local-env/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">OneCX</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-portal-ui-libs/current/general/index.html">OneCX Portal UI Libs</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-portal-ui-libs/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-quarkus/current/onecx-quarkus/index.html">Onecx Quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-quarkus/current/onecx-quarkus/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-parameter/current/general/index.html">Parameter Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-parameter/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-permission/current/general/index.html">Permission Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-permission/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-product-store/current/general/index.html">Product Store Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-product-store/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-shell/current/general/index.html">Shell UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-shell/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-tenant/current/general/index.html">Tenant Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-tenant/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-test/current/general/index.html">Test Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-test/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-theme/current/general/index.html">Theme Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-theme/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-user-profile/current/general/index.html">User Profile Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-user-profile/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-welcome/current/general/index.html">Welcome Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-welcome/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-workspace/current/general/index.html">Workspace Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-workspace/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">OneCX</a></li>
    <li><a href="../guides/index.html">Guides</a></li>
    <li><a href="index.html">Implementation Details</a></li>
    <li><a href="bootstrapping.html">Microfrontend Bootstrapping</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/onecx/docs-guides-ui/edit/main/docs/modules/implementation-details/pages/bootstrapping.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">OneCX Microfrontend Content Bootstrapping</h1>
    <div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bootstrapping a Microfrontend involves setting up the initial structure and configuration for a Microfrontend application. This process typically includes creating the necessary directories, installing dependencies, and configuring the build tools to ensure that the Microfrontend can run independently and integrate with other Microfrontends or a shell application.</p>
</div>
<div class="paragraph">
<p>This document aims to explain the details related to Microfrontend&#8217;s content bootstrapping. Depending on the content&#8217;s type and expose method, there are different requirements needed to be fulfilled to ensure the content is loaded correctly by OneCX platform elements. This topic is highly related to <a href="microfrontend-content-loading.html" class="xref page">Microfrontend content loading</a> and <a href="webpack.html" class="xref page">Microfrontend configuration with Webpack</a>. It is recommended to be familiar with those before reading this document.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="microfrontend-content-bootstrapping-explained"><a class="anchor" href="#microfrontend-content-bootstrapping-explained"></a>Microfrontend Content Bootstrapping Explained</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="microfrontend-content-loading.html" class="xref page">Microfrontend content loading</a> is an action triggered by the route change (Shell Application&#8217;s responsibility of loading modules) or by the Slot Component display (Slot Component&#8217;s responsibility of loading Remote Components). During this action, Microfrontend&#8217;s content, exposed via remote entry file, is loaded and bootstrapped using the provided file in <a href="webpack.html" class="xref page">Webpack configuration</a>.</p>
</div>
<div class="paragraph">
<p>Depending on the content type and chosen expose method, different adjustments have to be made to ensure correct content bootstrapping.</p>
</div>
<div class="sect2">
<h3 id="content-exposed-using-angular-method"><a class="anchor" href="#content-exposed-using-angular-method"></a>Content Exposed Using Angular Method</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>It is NOT recommended</strong> to use the Angular expose method. Doing so restrains the platform from using many frameworks with different versions, which means that all Microfrontends would need to use the same technology and version.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When exposing modules and Remote Components using the Angular method, there are two requirements:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Webpack configuration needs to expose the module or component file directly. It means that instead of pointing to a <strong>main.ts</strong> file that is bootstrapping the content, <strong>module.ts</strong> and <strong>component.ts</strong> files should be used directly.</p>
</li>
<li>
<p>The <strong>main.ts</strong> file of Microfrontend&#8217;s modules (content type) needs to bootstrap the module asynchronously.</p>
<div class="paragraph">
<p><strong>main.ts</strong> content should look similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import('./bootstrap').catch(err =&gt; console.error(err));</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>bootstrap.ts</strong> content should look similar to (or any custom bootstrap of your Microfrontend):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { AppModule } from './app/app.module';
import { environment } from './environments/environment';
import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';
import { enableProdMode } from '@angular/core';

if (environment.production) {
  enableProdMode();
}

platformBrowserDynamic().bootstrapModule(AppModule)
  .catch(err =&gt; console.error(err));</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="content-exposed-using-webcomponent-method"><a class="anchor" href="#content-exposed-using-webcomponent-method"></a>Content Exposed Using Webcomponent Method</h3>
<div class="paragraph">
<p><a href="webcomponents.html#onecx-angular-webcomponents" class="xref page">Loading mechanism for modules and Remote Components exposed using Webcomponent method</a> requires that content is adapted to using Web Components Custom Elements. For both content types, bootstrapping logic needs to register a Custom Element in the Custom Elements Registry.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For Angular-based content, apart from Custom Element registration, it is also required to cover a few Angular-related issues. For more information on those issues, please refer <a href="webcomponents.html#angular-issues" class="xref page">here</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is recommended to use the <a href="webcomponents.html#onecx-angular-webcomponents" class="xref page">@onecx/angular-webcomponents</a> library to bootstrap Microfrontend&#8217;s content using its exposed methods. This library will be used in the examples throughout this document.</p>
</div>
<div class="sect3">
<h4 id="module-bootstrapping-and-configuration"><a class="anchor" href="#module-bootstrapping-and-configuration"></a>Module Bootstrapping and Configuration</h4>
<div class="paragraph">
<p>The following requirements need to be fulfilled when exposing modules using the Webcomponent method:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Webpack configuration needs to expose the <strong>main.ts</strong> file of the module.</p>
</li>
<li>
<p>The <strong>main.ts</strong> file of the module needs to bootstrap the module asynchronously.</p>
</li>
<li>
<p>Module bootstrapping has to cover <a href="webcomponents.html#angular-issues" class="xref page">Angular issues</a> (for Angular-based modules only)</p>
</li>
<li>
<p>Module class</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>needs to register an entry point as a Custom Element in the Custom Elements Registry.</p>
</li>
<li>
<p>needs to adapt routing so Shell registers routing happening within the module.</p>
</li>
<li>
<p>needs to adapt configuration, so services are using correct URLs to external resources.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Below, a module setup example (Angular-based) for using the Webcomponent expose method is presented. Each file&#8217;s content is going to be explained in detail, with important context information for technologies other than those presented.</p>
</div>
<div class="listingblock">
<div class="title">webpack.config.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">const config = withModuleFederationPlugin({
  name: 'example-ui',
  filename: 'remoteEntry.js',
  exposes: {
    './ExampleModule': './src/main.ts'
  },
  ...
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Webpack configuration is exposing a <strong>main.ts</strong> file.</p>
</div>
<div class="listingblock">
<div class="title">src/main.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import('./bootstrap').catch((err) =&gt; console.error(err))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>main.ts</strong> file is importing (asynchronously) the <strong>bootstrap.ts</strong> file.</p>
</div>
<div class="listingblock">
<div class="title">src/bootstrap.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { bootstrapModule } from '@onecx/angular-webcomponents'
import { environment } from './environments/environment'
import { ExampleModule } from './app/module'

bootstrapModule(ExampleModule, 'microfrontend', environment.production)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>bootstrap.ts</strong> file is bootstrapping the module using @onecx/angular-webcomponents library to ensure that <a href="webcomponents.html#angular-issues" class="xref page">Angular ngZone and platform are shared</a> (Angular requirement only). For other technologies, simply call any asynchronous bootstrap function required.</p>
</div>
<div class="listingblock">
<div class="title">src/app/module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { HttpClient, provideHttpClient, withInterceptorsFromDi } from '@angular/common/http'
import { APP_INITIALIZER, DoBootstrap, Injector, NgModule } from '@angular/core'
import { Router, RouterModule, Routes } from '@angular/router'
import { BrowserModule } from '@angular/platform-browser'
import { BrowserAnimationsModule } from '@angular/platform-browser/animations'
import { CommonModule } from '@angular/common'
import { MissingTranslationHandler, TranslateLoader, TranslateModule } from '@ngx-translate/core'
import {
  AppStateService,
  ConfigurationService,
  createTranslateLoader,
  PortalCoreModule,
  PortalMissingTranslationHandler,
  PortalApiConfiguration,
} from '@onecx/portal-integration-angular'
import { AngularAuthModule } from '@onecx/angular-auth'
import { createAppEntrypoint, initializeRouter, startsWith } from '@onecx/angular-webcomponents'
import { addInitializeModuleGuard } from '@onecx/angular-integration-interface'
import { Configuration } from './shared/generated'

@Component({
  selector: 'app-root',
  template: `&lt;router-outlet&gt;&lt;/router-outlet&gt;`
})
export class AppEntrypointComponent {}

export const routes: Routes = [
  {
    matcher: startsWith(''),
    loadChildren: () =&gt; import('./feature/feature.module').then((mod) =&gt; mod.FeatureModule)
  },
  {
    matcher: startsWith('tracking'),
    loadChildren: () =&gt; import('./tracking/tracking.module').then((mod) =&gt; mod.TrackingModule)
  }
]

function apiConfigProvider(configService: ConfigurationService, appStateService: AppStateService) {
  return new PortalApiConfiguration(Configuration, environment.apiPrefix, configService, appStateService)
}

@NgModule({
    declarations: [AppEntrypointComponent],
    imports: [
        CommonModule,
        PortalCoreModule.forMicroFrontend(),
        RouterModule.forRoot(addInitializeModuleGuard(routes)),
        TranslateModule.forRoot({
        extend: true,
        isolate: false,
        loader: {
            provide: TranslateLoader,
            useFactory: createTranslateLoader,
            deps: [HttpClient, AppStateService]
        },
        missingTranslationHandler: {
            provide: MissingTranslationHandler,
            useClass: PortalMissingTranslationHandler
        }
        }),
        BrowserModule,
        AngularAuthModule,
        BrowserAnimationsModule,
    ],
    exports: [],
    providers: [
        {
            provide: Configuration,
            useFactory: apiConfigProvider,
            deps: [ConfigurationService, AppStateService]
        },
        {
            provide: APP_INITIALIZER,
            useFactory: initializeRouter,
            multi: true,
            deps: [Router, AppStateService]
        },
        provideHttpClient(withInterceptorsFromDi())
    ]
})
export class ExampleModule implements DoBootstrap {
    constructor(private readonly injector: Injector) {}

    ngDoBootstrap(): void {
        createAppEntrypoint(AppEntrypointComponent, 'example-webcomponent', this.injector)
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="remote-module-example-deep-dive"><a class="anchor" href="#remote-module-example-deep-dive"></a>Remote Module Example Deep Dive</h4>
<div class="paragraph">
<p>The <strong>module.ts</strong> file prepares the module for integration with the OneCX platform.</p>
</div>
<div class="paragraph">
<p>This example showcases the recommended approach of defining modules (Angular-based) using the Webcomponent method. Here is a list of important features of this example:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Module imports</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>CommonModule, BrowserModule and BrowserAnimationsModule Angular modules used for adding functionality to the module.</p>
</li>
<li>
<p>PortalCoreModule is defined to allow usage of OneCX components and services.</p>
</li>
<li>
<p>TranslateModule is defined to allow translations using translation keys within the module.</p>
</li>
<li>
<p>AngularAuthModule is defined to use OneCX authorization mechanisms.</p>
</li>
<li>
<p>RouterModule is defined for routing to feature modules within the exposed module.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Entrypoint component</dt>
<dd>
<p>AppEntrypoint is a standard Angular component that has a <code>&lt;router-outlet&gt;</code> element in its template. The <a href="webcomponents.html#create-app-entrypoint" class="xref page">createAppEntrypoint</a> registers AppEntrypointComponent in the Custom Elements Registry, so anytime '&lt;example-webcomponent&gt;' is rendered, AppEntrypointComponent should be instantiated.</p>
<div class="paragraph">
<p>The third parameter, being the module&#8217;s Injector, is very important. This injector will be used by the instances of AppEntrypointComponent rendered using Web Components technology, meaning that each instance will have everything related to the module already set up. That also means the <code>&lt;router-outlet&gt;</code> will be using routes defined for the module.</p>
</div>
<div class="paragraph">
<p><a id="module-rotuer-connection"></a>The <a href="webcomponents.html#create-app-entrypoint" class="xref page">createAppEntrypoint</a> method is also responsible for connecting the module&#8217;s router to the Shell&#8217;s router. Every time the URL of the browser changes, the Shell is going to publish a new message, via <a href="../javascript/libraries/integration-interface.html#events-topic" class="xref page">EventsTopic</a>, with information about the new URL. The <code>createAppEntrypoint</code> method subscribes to the <a href="../javascript/libraries/integration-interface.html#events-topic" class="xref page">EventsTopic</a> and updates the router state accordingly to the received information.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For technologies other than Angular, it is recommended to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>register a Custom Element in the Custom Elements Registry.</p>
</li>
<li>
<p>provide dependencies to registered Custom Element according to the module.</p>
</li>
<li>
<p>listen to <a href="../javascript/libraries/integration-interface.html#events-topic" class="xref page">EventsTopic</a> data changes and update the state of the module&#8217;s routing.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Routes matching</dt>
<dd>
<p>Each defined route will load a feature module whenever it is activated. Because the Webcomponent expose method causes multiple routers to exist at the same time (Shell has its own router and every module or Remote Component displayed at a single point in time can have their own), an adjustment to the routes definition has to be made.</p>
<div class="paragraph">
<p>The idea of routing in this example is the following:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>User enters 'shell_url/workspace_name/example_base_path' URL - FeatureModule is used.</p>
</li>
<li>
<p>User enters 'shell_url/workspace_name/example_base_path/tracking' URL - TrackingModule is used.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>With the following URL parts meaning:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>shell_url</code> - the Shell Application deployment URL, e.g. <code>localhost:4200/shell.</code></p>
</li>
<li>
<p><code>workspace_name</code> - name of the accessed Workspace, e.g. <code>admin</code>.</p>
</li>
<li>
<p><code>example_base_path</code> - base path of the example Microfrontend (configured via OneCX Core Applications), e.g. <code>example</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Prior to routing within Microfrontend&#8217;s module, the Shell uses shell_url, workspace_name and example_base_path parts of the URL to load the module. Because of this fact, the module&#8217;s router needs to remove those parts from consideration when matching its routes. Usually, the <code>path</code> property of the route is used to control the route activation, but in that case, the Microfrontend&#8217;s module needs a way to only match the relevant part of the URL.</p>
</div>
<div class="paragraph">
<p>Using the <a href="webcomponents.html#starts-with" class="xref page">startsWith</a> function from <a href="webcomponents.html#onecx-angular-webcomponents" class="xref page">@onecx/angular-webcomponents</a> for the <a href="https://angular.dev/api/router/UrlMatcher">matcher</a> property of a route object results in the router considering only those URL parts relevant to the module. In order for it to work properly, the <a href="webcomponents.html#initialize-router" class="xref page">initializeRouter</a> provider has to be added for the module as an app initializer.</p>
</div>
<div class="paragraph">
<p>During module creation <a href="webcomponents.html#initialize-router" class="xref page">initializeRouter</a>:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>adds Microfrontend information (based on <a href="../javascript/libraries/integration-interface.html#current-mfe-topic" class="xref page">CurrentMfeTopic</a>) to each route.</p>
</li>
<li>
<p>rewrites routes containing <code>redirectTo</code> for correct redirection.</p>
</li>
<li>
<p>creates a new route (used when routing away from the module):</p>
<div class="ulist">
<ul>
<li>
<p>matched when none of the defined routes were matched.</p>
</li>
<li>
<p>displays nothing (for a period of time when the user routes between Microfrontends).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The <a href="webcomponents.html#starts-with" class="xref page">startsWith</a> method uses Microfrontend information, saved in the route&#8217;s data, to remove already used parts from consideration when matching routes within the module.</p>
</div>
<div class="paragraph">
<p>To create your own matchers, please consider using the <a href="webcomponents.html#onecx-angular-webcomponents" class="xref page">@onecx/angular-webcomponents</a> library.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For technologies other than Angular, it is recommended to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use Microfrontend information from <a href="../javascript/libraries/integration-interface.html#current-mfe-topic" class="xref page">CurrentMfeTopic</a> to only use relevant parts of the URL for routing and redirecting correctly.</p>
</li>
<li>
<p>Ensure routing away from the module is not causing side effects.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Configuration</dt>
<dd>
<p>All services utilizing HttpClient used within the Microfrontend&#8217;s module need to know how to make requests to external resources. Depending on the configuration of the Workspace, they need to take that context into consideration when creating a URL for those resources.</p>
<div class="paragraph">
<p>A service might want to call <code>deployment_url/bff/search</code> by default. With this call being made, the MFE App will need to access the BFF. When the Application&#8217;s path within the Workspace is <code>mfe/example</code> the call has to be made to <code>deployment_url/mfe/example/bff/search</code>.</p>
</div>
<div class="paragraph">
<p>The <code>apiConfigProvider</code> presented in the example is utilizing the <code>PortalApiConfiguration</code> class as <code>Configuration</code> for the services. It is listening for the <a href="../javascript/libraries/integration-interface.html#current-mfe-topic" class="xref page">CurrentMfeTopic</a> changes and overwriting the basePath accordingly to the received message, and all services use that information to construct a valid URL.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For technologies other than Angular, it is recommended to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Listen to <a href="../javascript/libraries/integration-interface.html#current-mfe-topic" class="xref page">CurrentMfeTopic</a> changes and overwrite services configuration to ensure the correct resource is accessed.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="remote-component-bootstrapping-and-configuration"><a class="anchor" href="#remote-component-bootstrapping-and-configuration"></a>Remote Component Bootstrapping and Configuration</h4>
<div class="paragraph">
<p>The following requirements need to be fulfilled when exposing Remote Components using the Webcomponent method:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Webpack configuration needs to expose the <strong>main.ts</strong> file of the Remote Component.</p>
</li>
<li>
<p>The <strong>main.ts</strong> file of the Remote Component needs to bootstrap the component asynchronously.</p>
</li>
<li>
<p>Component bootstrap</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>has to cover <a href="webcomponents.html#angular-issues" class="xref page">Angular issues</a> (for Angular-based Remote Components only).</p>
</li>
<li>
<p>needs to register the component as a Custom Element in the Custom Elements Registry.</p>
</li>
<li>
<p>needs to adapt routing so Shell registers routing happening within the Remote Component.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Component class needs to use the Remote Component initialization mechanism.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Below is an example of setting up a Remote Component in Angular using the Webcomponent expose method. Each file&#8217;s content is going to be explained in detail, with important context information for technologies other than those presented.</p>
</div>
<div class="listingblock">
<div class="title">webpack.config.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">const config = withModuleFederationPlugin({
  name: 'example-ui',
  filename: 'remoteEntry.js',
  exposes: {
    './ExampleComponent': './src/app/remotes/example/example.component.main.ts'
  },
  ...
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Webpack configuration is exposing an <strong>example.component.main.ts</strong> file.</p>
</div>
<div class="listingblock">
<div class="title">src/app/remotes/example/example.component.main.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import('./example.component.bootstrap').catch((err) =&gt; console.error(err))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>example.component.main.ts</strong> file is importing (asynchronously) the <strong>example.component.bootstrap.ts</strong> file.</p>
</div>
<div class="listingblock">
<div class="title">src/app/remotes/example/example.component.bootstrap.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {
  HttpClient,
  provideHttpClient,
  withInterceptorsFromDi,
} from '@angular/common/http';
import {
  APP_INITIALIZER,
  importProvidersFrom
} from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { BrowserAnimationsModule } from '@angular/platform-browser/animations';
import { AngularAuthModule } from '@onecx/angular-auth';
import { bootstrapRemoteComponent } from '@onecx/angular-webcomponents';
import {
  createRemoteComponentTranslateLoader,
  UserService
} from '@onecx/portal-integration-angular';
import { environment } from 'src/environments/environment';
import { ExampleComponent } from './example.component';
import {
  BASE_URL,
  provideTranslateServiceForRoot,
} from '@onecx/angular-remote-components';
import { TranslateLoader } from '@ngx-translate/core';
import { ReplaySubject } from 'rxjs';

function userProfileInitializer(userService: UserService) {
  return async () =&gt; {
    await userService.isInitialized;
  };
}

bootstrapRemoteComponent(
  ExampleComponent,
  'example-remote-component',
  environment.production,
  [
    provideHttpClient(withInterceptorsFromDi()),
    {
      provide: BASE_URL,
      useValue: new ReplaySubject&lt;string&gt;(1),
    },
    provideTranslateServiceForRoot({
      isolate: true,
      loader: {
        provide: TranslateLoader,
        useFactory: createRemoteComponentTranslateLoader,
        deps: [HttpClient, BASE_URL],
      },
    }),
    importProvidersFrom(
      AngularAuthModule,
      BrowserModule,
      BrowserAnimationsModule,
    ),
    {
      provide: APP_INITIALIZER,
      useFactory: userProfileInitializer,
      deps: [UserService],
      multi: true,
    },
  ]
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>example.component.bootstrap.ts</strong> file is bootstrapping the Remote Component using <a href="webcomponents.html#onecx-angular-webcomponents" class="xref page">@onecx/angular-webcomponents</a> library to ensure that <a href="webcomponents.html#angular-issues" class="xref page">Angular ngZone and platform are shared</a> (Angular requirement only). It also connects the Shell router with the Remote Component&#8217;s router (if such exists). The last argument is an array of providers required for the component to work properly. A detailed description of this file can be found in the <a href="#summary">[summary]</a>.</p>
</div>
<div class="listingblock">
<div class="title">src/app/remotes/example/example.component.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { CommonModule, Location } from '@angular/common';
import { Component, Inject, Input } from '@angular/core';
import { TranslateModule, TranslateService } from '@ngx-translate/core';
import { AngularAuthModule } from '@onecx/angular-auth';
import {
  UserService
} from '@onecx/angular-integration-interface';
import {
  AngularRemoteComponentsModule,
  BASE_URL,
  ocxRemoteComponent,
  ocxRemoteWebcomponent,
  RemoteComponentConfig,
} from '@onecx/angular-remote-components';
import {
  PortalCoreModule
} from '@onecx/portal-integration-angular';
import { ReplaySubject } from 'rxjs';
import { environment } from 'src/environments/environment'

@NgModule({
  imports: [
    PortalCoreModule.forMicroFrontend()
  ]
})
export class SharedModule {}

@Component({
  standalone: true,
  imports: [
    AngularAuthModule,
    AngularRemoteComponentsModule,
    CommonModule,
    SharedModule,
    PortalCoreModule,
    TranslateModule,
  ],
  selector: 'example-comp',
  template: `&lt;h&gt;Hello from Remote Component&lt;/h&gt;`,
})
export class ExampleComponent
  implements ocxRemoteComponent, ocxRemoteWebcomponent
{
  permissions: string[] = [];

  constructor(
    @Inject(BASE_URL) private readonly baseUrl: ReplaySubject&lt;string&gt;,
    private readonly userService: UserService,
    private readonly translateService: TranslateService,
    private readonly exampleService: ExampleAPIService
  ) {
    this.translateService.use(this.userService.lang$.getValue());
  }

  @Input() set ocxRemoteComponentConfig(config: RemoteComponentConfig) {
    this.ocxInitRemoteComponent(config);
  }

  ocxInitRemoteComponent(config: RemoteComponentConfig): void {
    this.baseUrl.next(config.baseUrl);
    this.permissions = config.permissions;
    this.exampleService.configuration = new Configuration({
      basePath: Location.joinWithSlash(config.baseUrl, environment.apiPrefix)
    })
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="remote-component-example-deep-dive"><a class="anchor" href="#remote-component-example-deep-dive"></a>Remote Component Example Deep Dive</h4>
<div class="paragraph">
<p>The <strong>example.component.ts</strong> file prepares the Remote Component for integration with the OneCX platform.</p>
</div>
<div class="paragraph">
<p><a id="summary"></a>This example showcases the recommended approach to define Remote Components (Angular-based) using the Webcomponent method. Here is a list of important features of this example:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Component bootstrap</dt>
<dd>
<p>Remote Components are better suited for integration with the Web Components Custom Elements concept. The biggest reason for this is that a Remote Component already represents a component, meaning that there is no need to define any additional entry point component (like what was done for module content type).</p>
<div class="paragraph">
<p>The <a href="webcomponents.html#bootstrap-remote-component" class="xref page">bootstrapRemoteComponent</a> method is bootstrapping the Remote Component. It is responsible for:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Creating application</dt>
<dd>
<p>As a first step, the <a href="webcomponents.html#bootstrap-remote-component" class="xref page">bootstrapRemoteComponent</a> method is going to create an Angular application. The created application will use defined providers (argument of <a href="webcomponents.html#bootstrap-remote-component" class="xref page">bootstrapRemoteComponent</a>). In this example, the following providers are defined:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>HttpClient  (via provideHttpClient) - used for making HTTP calls.</p>
</li>
<li>
<p>TranslateService (via provideTranslateServiceForRoot) - used for making translations via translation keys.</p>
</li>
<li>
<p>providers from AngularAuthModule - OneCX authorization mechanisms.</p>
</li>
<li>
<p>providers from BrowserModule.</p>
</li>
<li>
<p>providers from BrowserAnimationsModule.</p>
</li>
<li>
<p>APP_INITIALIZER using userProfileInitializer factory function - in ExampleComponent&#8217;s constructor, the <code>this.userService.lang$.getValue()</code> call is made to set TranslationService language. Since that call is synchronous, it is important to ensure that <a href="../angular/libraries/angular-integration-interface.html#user-service" class="xref page">UserService</a> has been initialized before fetching its data.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Providers passed in the xref:webcomponents.adoc#bootstrap-remote-componentbootstrapRemoteComponent method call should contain any providers required by the Remote Component. Any services or injection tokens have to be defined here. It is important that those providers are aligned with imports defined via the Remote Component&#8217;s definition. Depending on the Remote Component, different providers and imports will be defined.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The created application is going to have an Injector (just like a module does). This Injector will be used by the instance of ExampleComponent rendered using Web Components technology.</p>
</div>
<div class="paragraph">
<p>For Angular-based Remote Components, it is recommended to use <a href="webcomponents.html#bootstrap-remote-component" class="xref page">bootstrapRemoteComponent</a> and define every required provider as an argument of this method. This approach will ensure that the rendered component has all required services, tokens, etc. already set up.</p>
</div>
</dd>
<dt class="hdlist1">Fixing <a href="webcomponents.html#angular-issues" class="xref page">Angular issues</a> (Angular requirement only)</dt>
<dd>
<p>The <a href="webcomponents.html#bootstrap-remote-component" class="xref page">bootstrapRemoteComponent</a> method takes care of ngZone and platform sharing.</p>
</dd>
<dt class="hdlist1">Connecting router</dt>
<dd>
<p>The <a href="webcomponents.html#bootstrap-remote-component" class="xref page">bootstrapRemoteComponent</a> method is responsible for connecting the Remote Component&#8217;s router to the Shell&#8217;s router (if there is one defined), so their states are always the same. The connection is set up in the same way as for the <a href="#module-rotuer-connection">module&#8217;s router</a>.</p>
</dd>
<dt class="hdlist1">Registering the Custom Element</dt>
<dd>
<p>The <a href="webcomponents.html#bootstrap-remote-component" class="xref page">bootstrapRemoteComponent</a> method registers the ExampleComponent in the Custom Elements Registry, so anytime <code>&lt;example-remote-component&gt;</code> is rendered, ExampleComponent should be instantiated.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For technologies other than Angular, it is recommended to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>register a Custom Element in the Custom Elements Registry.</p>
</li>
<li>
<p>provide dependencies to registered Custom Element according to the Remote Component.</p>
</li>
<li>
<p>listen for EventsTopic data changes and update the state of the Remote Component&#8217;s routing (if routing is used).</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Component definition and configuration</dt>
<dd>
<p>For Angular-based components, any Remote Component is required to be a standalone Angular component. The component&#8217;s import array&#8217;s purpose is to declare all required dependencies, just like for Angular modules. It is recommended to import:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>AngularAuthModule for authorization mechanisms.</p>
</li>
<li>
<p>CommonModule for common Angular functionalities.</p>
</li>
<li>
<p>SharedModule with <code>PortalCoreModule.forMicroFrontend()</code> import for allowing OneCX components and services usage.</p>
</li>
<li>
<p>PortalCoreModule so the component recognizes OneCX components and services.</p>
</li>
<li>
<p>TranslateModule for translations mechanism.</p>
</li>
<li>
<p>AngularRemoteComponentsModule.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>In the <strong>example.component.bootstrap.ts</strong>, some providers related to those dependencies were already declared in the <a href="webcomponents.html#bootstrap-remote-component" class="xref page">bootstrapRemoteComponent</a> method call.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For technologies other than Angular, it is recommended to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>define the component so that all dependencies are provided.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">Configuration and initialization</dt>
<dd>
<p>The ExampleComponent implements two interfaces:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>ocxRemoteComponent - requires component to define ocxInitRemoteComponent method</p>
</li>
<li>
<p>ocxRemoteWebcomponent - requires component to define ocxRemoteComponentConfig property</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>For Webcomponent method, it is required to implement ocxRemoteWebcomponent, but optional to implement ocxRemoteComponent. The <code>ocxRemoteComponentConfig</code> is set by the Remote Component&#8217;s Slot Component after the Remote Component&#8217;s element is created in the HTML. The value that is set is of type <a href="#RemoteComponentConfig">RemoteComponentConfig structure</a>. On receiving the configuration, the Remote Component should:</p>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>update BASE_URL.</p>
</li>
<li>
<p>update permissions (if permissions are used).</p>
</li>
<li>
<p>update the base URL of its services (if services that require external calls are used).</p>
</li>
</ul>
</div>
</div>
</div>
<table id="RemoteComponentConfig" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. RemoteComponentConfig structure</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>appId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier of the Microfrontend Remote Component is part of.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>productName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Application currently Remote Component is part of.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>permissions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string[]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Current user permissions related to the Remote Component&#8217;s Microfrontend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>baseUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of Remote Component&#8217;s Microfrontend to be used when accessing its content (remote entry file, assets, etc.), e.g. <code>'/mfe/mfe_name'</code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For technologies other than Angular, it is recommended to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>implement the component so the ocxRemoteComponentConfig property is defined, and whenever it is set:</p>
<div class="ulist">
<ul>
<li>
<p>the component&#8217;s resources or the component itself will use the correct baseUrl to access external resources.</p>
</li>
<li>
<p>permission checking mechanisms will use provided permissions.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
  </article>  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
<script>
    document.addEventListener('readystatechange', event => {
    if (event.target.readyState === "complete") {
        renderAllBpmnJs();
    }
    });    
</script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: OneCX</title>
    <link rel="canonical" href="https://onecx.github.io/docs/onecx-quarkus/current/onecx-quarkus/onecx-openapi-generator.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/diagram-js.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/bpmn-font/css/bpmn.css">
    <link rel="stylesheet" href="../../../_/css/bpmn.css">
    <link href="../../../_/css/fontawesome.css" rel="stylesheet" />
    <link href="../../../_/css/brands.css" rel="stylesheet" />
    <link href="../../../_/css/solid.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui.css">
    <script>var uiRootPath = '../../../_'</script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/bpmn-js/dist/bpmn-viewer.production.min.js"></script>
    <script src="https://unpkg.com/dmn-js@11.0.2/dist/dmn-viewer.production.min.js"></script>
    <script src="../../../_/js/bpmn.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-standalone-preset.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-bundle.js"></script>

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://onecx.github.io/docs">OneCX</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/docs">Home</a>
        <!--  <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/docs/docs-guides-quarkus/latest/">Quarkus</a>
            <a class="navbar-item" href="/docs/docs-guides-bpmn/latest/">Bpmn</a>
          </div> 
        </div> -->
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="onecx-quarkus" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Onecx Quarkus</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Onecx Quarkus</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="onecx-core.html">Onecx Core</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="onecx-permissions.html">Onecx Permissions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="onecx-tenant.html">Onecx Tenant</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="onecx-parameters.html">Onecx Parameters</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="onecx-openapi-generator.html">Onecx OpenApi Generator</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="onecx-validator.html">Onecx Validator</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="onecx-operator.html">Onecx Operator</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Onecx Quarkus</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../contribution/current/contribution/index.html">Contribution</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../contribution/current/contribution/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-document-management/current/general/index.html">Document Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-document-management/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-iam/current/index.html">IAM Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-iam/current/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../documentation/current/index.html">OneCX</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../documentation/current/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-portal-ui-libs/current/general/index.html">OneCX Portal UI Libs</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-portal-ui-libs/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Onecx Quarkus</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-permission/current/index.html">Permission Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-permission/current/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-product-store/current/index.html">Product Store Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-product-store/current/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-shell/current/general/index.html">Shell UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-shell/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-tenant/current/general/index.html">Tenant Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-tenant/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-test/current/general/index.html">Test Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-test/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-theme/current/general/index.html">Theme Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-theme/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-user-profile/current/general/index.html">User Profile Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-user-profile/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-welcome/current/general/index.html">Welcome Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-welcome/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../onecx-workspace/current/general/index.html">Workspace Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../onecx-workspace/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../documentation/current/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Onecx Quarkus</a></li>
    <li><a href="onecx-openapi-generator.html">Onecx OpenApi Generator</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/onecx/onecx-quarkus/edit/main/docs/modules/onecx-quarkus/pages/onecx-openapi-generator.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
    <div class="sect1">
<h2 id="_onecx_openapi_generator"><a class="anchor" href="#_onecx_openapi_generator"></a>onecx-openapi-generator</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_installation"><a class="anchor" href="#_installation"></a>Installation</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;
    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${openapitools.openapi-generator-maven-plugin.version}&lt;/version&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.tkit.onecx.quarkus&lt;/groupId&gt;
            &lt;artifactId&gt;onecx-openapi-generator&lt;/artifactId&gt;
            &lt;version&gt;2.0.0&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h3>
<div class="sect3">
<h4 id="_oauth2_scopes"><a class="anchor" href="#_oauth2_scopes"></a>OAuth2 scopes</h4>
<div class="paragraph">
<p>To enable the OpenAPI generator extension for OAuth2 scopes from the OpenAPI definition file, use the following additional property <code>onecx-scopes=true</code> in the maven plugin configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;
    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        &lt;!-- configuration --&gt;
        &lt;additionalProperties&gt;onecx-scopes=true&lt;/additionalProperties&gt;
        &lt;configOptions&gt;
            &lt;!-- configuration options --&gt;
        &lt;/configOptions&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Define OAuth2 scopes in your openapi file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">openapi: 3.0.3
info:
  title: example
  version: 1.0.0
servers:
  - url: "http://localhost:8080"
paths:
  /v1/themes:
    get:
      security:
        - oauth2: [ ocx-th:read ]
      operationId: getThemesInfo
      responses:
        200:
          description: OK
components:
  securitySchemes:
    oauth2:
      type: oauth2
      flows:
        clientCredentials:
          tokenUrl: https://oauth.simple.api/token
          scopes:
            ocx-th:read: Grants read access</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated Java source code contains the additional Quarkus annotation <code>io.quarkus.security.PermissionsAllowed</code> with the scope defined in the OpenAPI file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @io.quarkus.security.PermissionsAllowed({ "ocx-th:read" })
    @GET
    @Produces({ "application/json" })
    Response getThemesInfo();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_permissions"><a class="anchor" href="#_permissions"></a>Permissions</h4>
<div class="paragraph">
<p>To enable the OpenAPI generator extension for OneCX permissions from the OpenAPI definition file, use the following additional property <code>onecx-permissions=true</code> in the maven plugin configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;
    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        &lt;!-- configuration --&gt;
        &lt;additionalProperties&gt;onecx-scopes=true&lt;/additionalProperties&gt;
        &lt;configOptions&gt;
            &lt;!-- configuration options --&gt;
        &lt;/configOptions&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Define Onecx permission in your openapi file as vendor extension.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">   x-onecx:
    permissions:
     themes:
      - read</code></pre>
</div>
</div>
<div class="paragraph">
<p>Openapi example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">openapi: 3.0.3
info:
  title: example
  version: 1.0.0
servers:
  - url: "http://localhost:8080"
paths:
 /themes:
  get:
   x-onecx:
    permissions:
     themes:
      - read
   operationId: getThemes
   responses:
    200:
     description: OK</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated Java source code contains the additional Quarkus annotation <code>io.quarkus.security.PermissionsAllowed</code> with the scope defined in the OpenAPI file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @io.quarkus.security.PermissionsAllowed({ "onecx:themes#read" })
    @GET
    @Produces({ "application/json" })
    Response getThemes();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_constraints"><a class="anchor" href="#_constraints"></a>Constraints</h4>
<div class="paragraph">
<p>To enable the OpenAPI generator extension for OneCX validator from the OpenAPI definition file, use the following additional property <code>onecx-constraints=true</code> in the maven plugin configuration.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This feature requires the extension <a href="onecx-validator.html" class="xref page">onecx-validator</a> in the classpath
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;
    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        &lt;!-- configuration --&gt;
        &lt;additionalProperties&gt;onecx-constraints=true&lt;/additionalProperties&gt;
        &lt;configOptions&gt;
            &lt;!-- configuration options --&gt;
        &lt;/configOptions&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Define Onecx constraints in your openapi file as vendor extension.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">   x-onecx:
    constraints:
     size:
        min: 10
        max: 100
        key: paramKey</code></pre>
</div>
</div>
<div class="paragraph">
<p>Openapi example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">openapi: 3.0.3
info:
  title: example
  version: 1.0.0
servers:
  - url: "http://localhost:8080"
paths:
 /themes:
  post:
   operationId: createThemes
   parameters:
     - in: header
       name: Content-Length
       required: true
       x-onecx:
         constraints:
           size:
             min: 10
             max: 100
             key: paramKey
   responses:
    200:
     description: OK</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated Java source code contains the additional Quarkus annotation <code>org.tkit.onecx.quarkus.validator.constraints.Size</code> with the size constraints defined in the OpenAPI file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @HeaderParam("Content-Length") @NotNull
    @org.tkit.onecx.quarkus.validator.constraints.Size(
            min = 10,
            max = 100,
            key = "paramKey")</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
  </article>  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
<script>
    document.addEventListener('readystatechange', event => {
    if (event.target.readyState === "complete") {
        renderAllBpmnJs();
    }
    });    
</script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Microfrontend Content Loading in OneCX :: OneCX Docs</title>
    <link rel="canonical" href="https://onecx.github.io/docs/docs/current/general/implementation-details/mfe-content-loading/index.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/diagram-js.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/bpmn-font/css/bpmn.css">
    <link rel="stylesheet" href="../../../../../_/css/bpmn.css">
    <link href="../../../../../_/css/fontawesome.css" rel="stylesheet" />
    <link href="../../../../../_/css/brands.css" rel="stylesheet" />
    <link href="../../../../../_/css/solid.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui.css">
    <script>var uiRootPath = '../../../../../_'</script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/bpmn-js/dist/bpmn-viewer.production.min.js"></script>
    <script src="https://unpkg.com/dmn-js@11.0.2/dist/dmn-viewer.production.min.js"></script>
    <script src="../../../../../_/js/bpmn.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-standalone-preset.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-bundle.js"></script>

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://onecx.github.io/docs">OneCX Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/docs">Home</a>
        <!--  <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/docs/docs-guides-quarkus/latest/">Quarkus</a>
            <a class="navbar-item" href="/docs/docs-guides-bpmn/latest/">Bpmn</a>
          </div> 
        </div> -->
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">OneCX Docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">General</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../architecture-overview/index.html">Architecture overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture-overview/frontend.html">Frontend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture-overview/bff.html">Backend-for-frontend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture-overview/backend.html">Backend</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture-overview/ci.html">CI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../architecture-overview/cd.html">CD</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OneCX Docs</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../onecx-announcement/current/general/index.html">Announcement Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-announcement/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-bookmark/current/general/index.html">Bookmark Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-bookmark/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../contribution/current/contribution/index.html">Contribution</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../contribution/current/contribution/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-document-management/current/general/index.html">Document Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-document-management/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../guides/current/general/index.html">Guides</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../guides/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-help/current/general/index.html">Help Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-help/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-iam/current/general/index.html">IAM Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-iam/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../index/current/index.html">Index</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../index/current/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">OneCX Docs</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../nx-plugins/current/general/index.html">OneCX generator</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../nx-plugins/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-local-env/current/general/index.html">OneCX Local Env</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-local-env/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-quarkus/current/onecx-quarkus/index.html">Onecx Quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-quarkus/current/onecx-quarkus/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-parameter/current/general/index.html">Parameter Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-parameter/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-permission/current/general/index.html">Permission Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-permission/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-product-store/current/general/index.html">Product Store Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-product-store/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-shell/current/general/index.html">Shell UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-shell/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-tenant/current/general/index.html">Tenant Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-tenant/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-test/current/general/index.html">Test Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-test/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-theme/current/general/index.html">Theme Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-theme/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-user-profile/current/general/index.html">User Profile Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-user-profile/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-welcome/current/general/index.html">Welcome Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-welcome/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../onecx-workspace/current/general/index.html">Workspace Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../onecx-workspace/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../index/current/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">OneCX Docs</a></li>
    <li><a href="index.html">Microfrontend Content Loading in OneCX</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/onecx/docs/edit/main/docs/modules/general/pages/implementation-details/mfe-content-loading/index.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">Microfrontend Content Loading in OneCX</h1>
    <div class="sect1">
<h2 id="microfrontends-content-loading-explained"><a class="anchor" href="#microfrontends-content-loading-explained"></a>Microfrontend&#8217;s Content Loading Explained</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When discussing Microfrontend loading mechanisms there are 2 important factors that decide on how loading mechanisms work. Those factors are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>content type</strong></p>
<div class="ulist">
<ul>
<li>
<p>Module</p>
</li>
<li>
<p>Remote Component</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>expose method</strong></p>
<div class="ulist">
<ul>
<li>
<p>Angular</p>
</li>
<li>
<p>Webcomponent</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of them are dependent on the Application Microfrontend&#8217;s content that is meant to be integrated with OneCX platform. Please make sure to properly configure each integrated Application in the Application Store.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>It is NOT recommended</strong> to use the Angular expose method. Doing so restrains the platform from using many frameworks with different versions, which means that all Microfrontends would need to use the same technology and version.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
OneCX platform uses <strong>Module Federation</strong> technology integrated with <strong>Webpack</strong> to expose and load Microfrontends. To find out more about how Module Federation enables Microfrontends, please refer <a href="https://webpack.js.org/concepts/module-federation/">here</a>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="content-type"><a class="anchor" href="#content-type"></a>Content Type</h3>
<div class="paragraph">
<p>In the context of content loading, content type <strong>determines which mechanism will be responsible for loading</strong>. Module loading will be handled by the Shell UI router via constructed routing rules, and Remote Component loading will be handled by the Slot Component (to which the Remote Component has been assigned).</p>
</div>
<div class="sect3">
<h4 id="shell-ui-router-mechanism"><a class="anchor" href="#shell-ui-router-mechanism"></a>Shell UI Router Mechanism (Module)</h4>
<div class="paragraph">
<p>When dealing with modules, Shell UI is responsible for loading them. As explained in the <a href="../../architecture-overview/shell.html" class="xref page">Shell overview</a>, Shell UI first constructs workspace and then handles routing and loading of remotes. Workspace configuration contains all valid routes to Applications registered for a given workspace, each route associated with a Microfrontend&#8217;s module.</p>
</div>
<div class="paragraph">
<p>Prior to any routing events, the Shell UI initializes the router to reflect workspace configuration. Based on the data from backend services about the current workspace, Shell UI creates routing rules to use during the runtime.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take a workspace using a User Profile Application as an example. Each Application in the workspace configuration has to have a path defined. This path is used for routing and accessing the remote entry file of the Application&#8217;s Microfrontend. Assuming the path is <code>/user</code>, Shell UI will create a routing rule specifying that whenever url of the page changes to one starting with <code>/user</code> it has to load the Microfrontend&#8217;s module.</p>
</div>
<div class="paragraph">
<p>After routing rules are successfully created, each registered Application should have a route registered in Shell UI&#8217;s router. Each route has a <strong>loadChildren method, which is called whenever a route gets activated</strong>, but it also has additional properties that are used by the shell during routing.</p>
</div>
<div class="paragraph">
<p>The <strong>loadChildren method is responsible for loading the remote module into the Shell UI&#8217;s memory using <a href="https://www.npmjs.com/package/@angular-architects/module-federation">@angular-architects/module-federation</a></strong>. When the remote module is loaded successfully, it is used by the router to display the module&#8217;s content in the content pane of the page.</p>
</div>
</div>
<div class="sect3">
<h4 id="slot-component-mechanism"><a class="anchor" href="#slot-component-mechanism"></a>Slot Component Mechanism (Remote Component)</h4>
<div class="paragraph">
<p>Remote Component loading is handled by the  Slot Component. The overall mechanism of Remote Component loading was explained in the <a href="../../architecture-overview/remote-components.html" class="xref page">Remote Components documentation</a>. In the context of content loading, it&#8217;s important to note the following aspects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Remote Component <strong>loading process starts when a Slot Component is rendered</strong> on a page.</p>
</li>
<li>
<p>Remote Component <strong>exposed content is loaded via <a href="https://www.npmjs.com/package/@angular-architects/module-federation">@angular-architects/module-federation</a></strong> (similar to module content type). Then, once it&#8217;s loaded successfully, it is <strong>rendered onto a page within the Slot Component via a dynamic content creation mechanism dependent on the chosen expose method</strong>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="expose-method"><a class="anchor" href="#expose-method"></a>Expose Method</h3>
<div class="paragraph">
<p>Expose method is a factor that is taken into consideration by the respective loading mechanism (Shell UI router or Slot Component) to ensure correct content loading. For module loading, the loadChildren method and router configuration are impacted. For Remote Component loading, a different mechanism of dynamic content creation is chosen. For information on specific expose method impacts, please refer to the following documents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="webcomponents.html" class="xref page">Webcomponent method</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="module-federation-loading-explained"><a class="anchor" href="#module-federation-loading-explained"></a>Module Federation Loading Explained</h3>
<div class="paragraph">
<p>Independent on the content type and expose method, OneCX platform will load exposed content using <a href="https://webpack.js.org/concepts/module-federation/">Module Federation</a>. During this step, exposed content is loaded using the file specified in the webpack configuration for the respective content. Such configuration is usually located in the <code>webpack.config.js</code> file. In the code snippet below, the <code>./src/main.ts</code> file would be used for the module and the <code>./src/app/remotes/my-comp/my-comp.component.main.ts</code> file for Remote Component loading.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">const config = withModuleFederationPlugin({
  name: 'my-application-ui',
  filename: 'remoteEntry.js',
  exposes: {
    './MyDefaultModule': './src/main.ts',
    './MyRemoteComponent': './src/app/remotes/my-comp/my-comp.component.main.ts'
  },
  ...
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Those files should contain code that takes care of all the setup required to display the content. Depending on the chosen expose method, the code in those files will vary.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="useful-resources"><a class="anchor" href="#useful-resources"></a>Useful Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../../architecture-overview/shell.html" class="xref page">Shell overview</a></p>
</li>
<li>
<p><a href="../../architecture-overview/mfe.html" class="xref page">OneCX Microfrontend</a></p>
</li>
<li>
<p><a href="../../architecture-overview/remote-components.html" class="xref page">OneCX Remote Components</a></p>
</li>
<li>
<p><a href="webcomponents.html" class="xref page">Web Components</a></p>
</li>
</ul>
</div>
</div>
</div>
  </article>  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../../_/js/site.js" data-ui-root-path="../../../../../_"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
<script>
    document.addEventListener('readystatechange', event => {
    if (event.target.readyState === "complete") {
        renderAllBpmnJs();
    }
    });    
</script>
  </body>
</html>

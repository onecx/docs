<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OneCX Shell :: OneCX Docs</title>
    <link rel="canonical" href="https://onecx.github.io/docs/docs/current/general/architecture-overview/shell.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/diagram-js.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/bpmn-font/css/bpmn.css">
    <link rel="stylesheet" href="../../../../_/css/bpmn.css">
    <link href="../../../../_/css/fontawesome.css" rel="stylesheet" />
    <link href="../../../../_/css/brands.css" rel="stylesheet" />
    <link href="../../../../_/css/solid.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui.css">
    <script>var uiRootPath = '../../../../_'</script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/bpmn-js/dist/bpmn-viewer.production.min.js"></script>
    <script src="https://unpkg.com/dmn-js@11.0.2/dist/dmn-viewer.production.min.js"></script>
    <script src="../../../../_/js/bpmn.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-standalone-preset.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-bundle.js"></script>

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://onecx.github.io/docs">OneCX Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/docs">Home</a>
        <!--  <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/docs/docs-guides-quarkus/latest/">Quarkus</a>
            <a class="navbar-item" href="/docs/docs-guides-bpmn/latest/">Bpmn</a>
          </div> 
        </div> -->
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">OneCX Docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">General</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Architecture overview</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="shell.html">Shell</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mfe.html">Microfrontends</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="remoteComponents.html">Remote components</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../implementation-details/index.html">Implementation details</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../implementation-details/webcomponents.html">Webcomponents</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OneCX Docs</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../onecx-announcement/current/general/index.html">Announcement Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-announcement/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-bookmark/current/general/index.html">Bookmark Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-bookmark/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-document-management/current/general/index.html">Document Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-document-management/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../guides/current/general/index.html">Guides</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../guides/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-help/current/general/index.html">Help Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-help/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-iam/current/general/index.html">IAM Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-iam/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../index/current/index.html">Index</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../index/current/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">OneCX Docs</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../nx-plugins/current/general/index.html">OneCX generator</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../nx-plugins/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-quarkus/current/onecx-quarkus/index.html">Onecx Quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-quarkus/current/onecx-quarkus/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-parameter/current/general/index.html">Parameter Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-parameter/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-permission/current/general/index.html">Permission Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-permission/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-product-store/current/general/index.html">Product Store Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-product-store/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-tenant/current/general/index.html">Tenant Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-tenant/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-theme/current/general/index.html">Theme Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-theme/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-user-profile/current/general/index.html">User Profile Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-user-profile/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-welcome/current/general/index.html">Welcome Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-welcome/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../onecx-workspace/current/general/index.html">Workspace Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../onecx-workspace/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../index/current/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">OneCX Docs</a></li>
    <li><a href="index.html">Architecture overview</a></li>
    <li><a href="shell.html">Shell</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/onecx/docs/edit/main/docs/modules/general/pages/architecture-overview/shell.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">OneCX Shell</h1>
    <div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OneCX Shell is the heart of the OneCX platform. It&#8217;s the most important OneCX core application that glues together all applications and makes the platform seems like a single page application. Without the shell running, there will be nothing for users to use.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="application_bundle"><a class="anchor" href="#application_bundle"></a>Application bundle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below is a list of apps the shell application consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>UI - user interface app which renders the platform overlay and is responsible for routing between applications</p>
</li>
<li>
<p>BFF - backend for frontend app connecting with OneCX core applications SVCs to construct workspaces</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_application_responsibilities"><a class="anchor" href="#_application_responsibilities"></a>Application responsibilities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Shell application is a special case of OneCX application. It is a host for Microfrontends in the platform. The list of its responsibilities is the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>client-side workspace construction</p>
</li>
<li>
<p>routing and remotes loading</p>
</li>
<li>
<p>workspace and user data sharing</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_client_side_workspace_construction"><a class="anchor" href="#_client_side_workspace_construction"></a>Client-side workspace construction</h3>
<div class="paragraph">
<p>OneCX platform is operating on the idea of workspaces. Each workspace can have many applications registered and can be customized to its users' needs via custom menu configuration, page theming and many more possibilities. To construct a valid workspace, the following operations happen:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Shell BFF gathers workspace information. Data required to construct a valid workspace to function on the platform is saved in several databases. These can be reached using SVCs of OneCX core applications. Shell BFF connects with them and gathers all required information in a single response.</p>
</li>
<li>
<p>Shell UI constructs routing rules for a given workspace based on the data fetched by Shell BFF.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_routing_and_remotes_loading"><a class="anchor" href="#_routing_and_remotes_loading"></a>Routing and remotes loading</h3>
<div class="paragraph">
<p>When Shell UI is finished with workspace construction, its next responsibility is to react to routing changes and load Microfrontends&#8217;s exposed modules into the page. To achieve that, Shell UI app is using Module Federation, which allows to dynamically load remote entries at runtime and display them in the host app. In this way, on a valid routing operation Shell UI app will load the exposed Microfrontend&#8217;s module and display it in the content pane of the page.</p>
</div>
</div>
<div class="sect2">
<h3 id="_workspace_and_user_data_sharing"><a class="anchor" href="#_workspace_and_user_data_sharing"></a>Workspace and user data sharing</h3>
<div class="paragraph">
<p>When Shell UI app receives the workspace and current user data from the backend, it makes sure that this data is available for any Microfrontend&#8217;s content. This data is passed on by the Shell UI app to Topics.</p>
</div>
<div class="paragraph">
<p>A Topic is a similar concept to that of an Observable, but it can be used to pass data between the apps using browser memory. It is a concept implemented in OneCX via <code>@onecx/integration-interface</code>. A more in-depth explanation on it can be found here(TODO). For Angular based Microfrontends, services in the <code>@onecx/angular-integration-interface</code> package might be useful during the development. They are operating on Topics which contain information passed along by the Shell UI app.</p>
</div>
<div class="paragraph">
<p>Having data persist in browser memory via Topics gives Microfrontend&#8217;s content direct access to information about the workspace and current user. Information passed on by the Shell UI app contains the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>details of current workspace</p>
</li>
<li>
<p>Remote Components and slots registered for current the workspace</p>
</li>
<li>
<p>the current user&#8217;s personal information</p>
</li>
<li>
<p>the current user&#8217;s settings (such as language or locale)</p>
</li>
<li>
<p>the current user&#8217;s permissions</p>
</li>
<li>
<p>currently accessed Microfrontend data (information available after Microfrontend gets loaded)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any Microfrontend&#8217;s content can then utilize this data and act on it with the possibility to react to data changes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_useful_resources"><a class="anchor" href="#_useful_resources"></a>Useful resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="index.html" class="xref page">Architecture overview</a></p>
</li>
<li>
<p><a href="mfe.html" class="xref page">Microfrontends</a></p>
</li>
<li>
<p><a href="remoteComponents.html" class="xref page">Remote Components</a></p>
</li>
<li>
<p>@onecx/integration-interface</p>
</li>
<li>
<p>@onecx/angular-integration-interface</p>
</li>
<li>
<p>module-federation</p>
</li>
</ul>
</div>
</div>
</div>
  </article>  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script>
    document.addEventListener('readystatechange', event => {
    if (event.target.readyState === "complete") {
        renderAllBpmnJs();
    }
    });    
</script>
  </body>
</html>

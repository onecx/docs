<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migrate vanilla Angular apps to OneCX :: OneCX Docs</title>
    <link rel="canonical" href="https://onecx.github.io/docs/guides/current/angular/cookbook/migrations/vanilla-to-onecx/index.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/diagram-js.css">
    <link rel="stylesheet" href="https://unpkg.com/bpmn-js/dist/assets/bpmn-font/css/bpmn.css">
    <link rel="stylesheet" href="../../../../../../_/css/bpmn.css">
    <link href="../../../../../../_/css/fontawesome.css" rel="stylesheet" />
    <link href="../../../../../../_/css/brands.css" rel="stylesheet" />
    <link href="../../../../../../_/css/solid.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui.css">
    <script>var uiRootPath = '../../../../../../_'</script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/bpmn-js/dist/bpmn-viewer.production.min.js"></script>
    <script src="https://unpkg.com/dmn-js@11.0.2/dist/dmn-viewer.production.min.js"></script>
    <script src="../../../../../../_/js/bpmn.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-standalone-preset.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@3.52.5/swagger-ui-bundle.js"></script>

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://onecx.github.io/docs">OneCX Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/docs">Home</a>
        <!--  <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/docs/docs-guides-quarkus/latest/">Quarkus</a>
            <a class="navbar-item" href="/docs/docs-guides-bpmn/latest/">Bpmn</a>
          </div> 
        </div> -->
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="guides" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../../general/index.html">Guides</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../../general/index.html">General</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../../general/api_guidelines.html">API Guidelines</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../../general/troubleshooting.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Documentation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../documentation/setup/product.html">Create new product</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../documentation/setup/repository.html">Integrating new repository</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../documentation/setup/local.html">Working with local copies</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../documentation/guides/reference.html">Referencing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Javascript</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../javascript/general/index.html">General</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../javascript/general/onecx-compatibility.html">OneCX Compatibility </a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Libraries</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../../javascript/libraries/integration-interface.html">@onecx/integration-interface</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../../javascript/migrations/migrate-to-v6.html">Migrate to OneCX version 6</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Angular</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../general/index.html">General</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../general/guidelines.html">Guidelines</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cookbooks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migrations</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="5">
    <a class="nav-link" href="index.html">Migrate vanilla Angular apps to OneCX</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../enable-standalone/index.html">Enable standalone mode for OneCX apps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../service/portal-message-service/index.html">PortalMessageService</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../service/portal-dialog-service/index.html">PortalDialogService</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../service/workspace-service/index.html">WorkspaceService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../components/page-header/index.html">PageHeader</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../components/group-by-count-diagram/index.html">GroupByCountDiagram</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../components/search-header/index.html">SearchHeader</a>
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../components/interactive-data-view/index.html">InteractiveDataView</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../components/interactive-data-view/data-table-column.html">DataTableColumn</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../multi-language/multi-language.html">Multi-language translations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../multi-language/multi-language-setup.html">Multi-language translations setup</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../multi-language/multi-language-usage.html">Multi-language translations usage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../toast-messages.html">Toast messages</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../theming.html">Theming</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../permissions.html">Permissions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../routing/index.html">Routing</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">PrimeNG</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../primeng/theming.html">Theming with PrimeNG</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../ngrx/ngrx.html">NgRx</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Cookbook</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../ngrx/cookbook/adding-search-criteria/general.html">Adding Search Criteria</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../ngrx/cookbook/adding-search-criteria/autocomplete/autocomplete.html">AutoComplete</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="7">
    <a class="nav-link" href="../../../ngrx/cookbook/adding-search-criteria/autocomplete/autocomplete-string.html">AutoComplete with array of type string</a>
  </li>
  <li class="nav-item" data-depth="7">
    <a class="nav-link" href="../../../ngrx/cookbook/adding-search-criteria/autocomplete/autocomplete-number.html">AutoComplete with array of type number</a>
  </li>
  <li class="nav-item" data-depth="7">
    <a class="nav-link" href="../../../ngrx/cookbook/adding-search-criteria/autocomplete/autocomplete-object.html">AutoComplete with array of type object</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../../ngrx/cookbook/adding-search-criteria/calendar.html">Calendar</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../../ngrx/cookbook/adding-search-criteria/dropdown.html">Dropdown</a>
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="../../../ngrx/cookbook/adding-search-criteria/multiselect.html">Multiselect</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../../../ngrx/cookbook/tabs/lazy-loading.html">Lazy Loading Tabs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Libraries</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../libraries/symlink.html">How to create a SymLink</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../libraries/angular-integration-interface.html">@onecx/angular-integration-interface</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../../libraries/working-with-shared-libraries.html">Working with shared libraries</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Quarkus</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../quarkus/project-structure.html">Project Structure</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../quarkus/quarkus-github-actions.html">Project GitHub actions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../quarkus/quarkus-rest-api.html">Rest API CRUD guidelines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../quarkus/quarkus-svc.html">Backend service (svc)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../quarkus/quarkus-bff.html">Backend for frontends (bff)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../quarkus/quarkus-operator.html">K8s operator (operator)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">BPMN</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../bpmn/cancel-timer.html">Cancel timer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../bpmn/request-callback.html">Request callback</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../bpmn/messages.html">Messages</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../bpmn/open-topics.html">Open topics</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Guides</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../../onecx-announcement/current/general/index.html">Announcement Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-announcement/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-bookmark/current/general/index.html">Bookmark Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-bookmark/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../contribution/current/contribution/index.html">Contribution</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../contribution/current/contribution/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-document-management/current/general/index.html">Document Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-document-management/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../../general/index.html">Guides</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-help/current/general/index.html">Help Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-help/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-iam/current/general/index.html">IAM Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-iam/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../index/current/index.html">Index</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../index/current/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../docs/current/general/index.html">OneCX Docs</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../docs/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../nx-plugins/current/general/index.html">OneCX generator</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../nx-plugins/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-local-env/current/general/index.html">OneCX Local Env</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-local-env/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-portal-ui-libs/current/general/index.html">OneCX Portal UI Libs</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-portal-ui-libs/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-quarkus/current/onecx-quarkus/index.html">Onecx Quarkus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-quarkus/current/onecx-quarkus/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-parameter/current/general/index.html">Parameter Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-parameter/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-permission/current/general/index.html">Permission Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-permission/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-product-store/current/general/index.html">Product Store Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-product-store/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-shell/current/general/index.html">Shell UI</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-shell/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-tenant/current/general/index.html">Tenant Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-tenant/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-test/current/general/index.html">Test Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-test/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-theme/current/general/index.html">Theme Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-theme/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-user-profile/current/general/index.html">User Profile Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-user-profile/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-welcome/current/general/index.html">Welcome Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-welcome/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../../onecx-workspace/current/general/index.html">Workspace Management</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../onecx-workspace/current/general/index.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../../index/current/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../../general/index.html">Guides</a></li>
    <li>Javascript</li>
    <li>Angular</li>
    <li>Cookbooks</li>
    <li>Migrations</li>
    <li><a href="index.html">Migrate vanilla Angular apps to OneCX</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/onecx/docs-guides-ui/edit/main/docs/modules/angular/pages/cookbook/migrations/vanilla-to-onecx/index.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">Migrate vanilla Angular apps to OneCX</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The goal of this guide is to provide step by step instructions on how to migrate a vanilla Angular app to a OneCX compatible microfrontend application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="general"><a class="anchor" href="#general"></a>General</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h3>
<div class="paragraph">
<p>This guide assumes that an Angular project is already set up and that a OneCX platform instance is up and running. At the time of writing, some required dependencies are only compatible with Angular version 18. Therefore the application must be updated to Angular 18 before migrating. Additionally, the Angular application should be based on feature modules, which are lazy loaded before routing or route directly to standalone components.</p>
</div>
<div class="paragraph">
<p>Note that this guide does not cover general Angular project setup or the steps to configure OneCX.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="migration-steps"><a class="anchor" href="#migration-steps"></a>Migration steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The goal of this migration is to transform a "vanilla" Angular app into a OneCX compatible app that exposes a microfrontend which can be loaded and displayed by the OneCX platform. To achieve this goal, a few migration steps have to be completed. All steps have been tested in fresh Angular apps generated with the Angular CLI and the NX CLI (using Webpack as a bundler). Some steps only apply to either Angular CLI or NX based applications and are marked accordingly.</p>
</div>
<div class="sect2">
<h3 id="ensure-functionality"><a class="anchor" href="#ensure-functionality"></a>Ensure that your application works as expected</h3>
<div class="paragraph">
<p>Before starting the migration, the correct functionality of the application in its "pre-migration" state should be verified by running existing tests, building the app and running it in a browser. This ensures that the app functions as expected before the migration, helping to prevent unexpected errors in later stages of the process.</p>
</div>
</div>
<div class="sect2">
<h3 id="install-dependencies"><a class="anchor" href="#install-dependencies"></a>Install necessary dependencies</h3>
<div class="paragraph">
<p>In order to convert an app into a OneCX compatible microfrontend it&#8217;s necessary to first install some dependencies which allow wrapping the app inside a OneCX compatible webcomponent and exposing it as a remote entrypoint.</p>
</div>
<div class="listingblock">
<div class="title">Dependencies</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">npm i @angular/elements@18 @angular-architects/module-federation @onecx/angular-integration-interface  @onecx/angular-utils @onecx/angular-webcomponents @webcomponents/webcomponentsjs</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Dev-Dependencies <span class="red">(Only Angular CLI)</span></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">npm i -D webpack webpack-merge ngx-build-plus@18</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For <code>nx</code> based applications the above mentioned dev dependencies are not needed as these apps already ship with a configurable builder.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="refactor-angular-json"><a class="anchor" href="#refactor-angular-json"></a>Refactor <code>angular.json</code> to use ngx-build-plus builders <span class="red">(Only Angular CLI)</span></h3>
<div class="paragraph">
<p>To correctly bundle an app for use in a microfrontend context, the default Angular bundler must be replaced with ngx-build-plus, and a few additional configuration options need to be specified.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>YOUR_APP_NAME</code> should be replaced with the name of the actual application, which can be obtained from <code>angular.json</code>. <code>TODO</code> comments should be taken care of and afterwards removed from the file.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">angular.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">...
"architect": {
    "build": {
        "builder": "ngx-build-plus:browser",
        "options": {
            ...
            // TODO: property "browser" should be removed in favor of "main" if it exists
            "main": "src/main.ts",
            "scripts": ["node_modules/@webcomponents/webcomponentsjs/webcomponents-bundle.js"],
            "extraWebpackConfig": "webpack.config.js",
            // TODO: Replace "./YOUR_ASSETS_FOLDER" with the path to your projects asset folder.
            "assets": [
              {
                "glob": "**/*",
                "input": "./YOUR_ASSETS_FOLDER",
                "output": "assets"
              },
              ...
            ]
        },
        ...
        "configurations": {
            "production": {
               ...
               "extraWebpackConfig": "webpack.prod.config.js"
            },
           ...
        }
    },
    "serve": {
        "builder": "ngx-build-plus:dev-server",
        "options": {
            ...
            "buildTarget": "YOUR_APP_NAME:build",
            "port": 4200,
            "publicHost": "http://localhost:4200",
            "extraWebpackConfig": "webpack.config.js"
        },
        "configurations": {
            ...
            "production": {
                ...
                "extraWebpackConfig": "webpack.prod.config.js"
            },
        },
        ...
    },
    "extract-i18n": {
        "builder": "ngx-build-plus:extract-i18n",
        "options": {
            "buildTarget": "YOUR_APP_NAME:build",
            "extraWebpackConfig": "webpack.config.js"
        }
    },
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="refactor-project-json"><a class="anchor" href="#refactor-project-json"></a>Refactor <code>project.json</code> to enable custom bundling <span class="aqua">(Only NX)</span></h3>
<div class="paragraph">
<p>To correctly bundle an app for use in a microfrontend context, the default bundler used for NX Angular projects must be replaced with a specific Webpack bundler, and a few additional configuration options need to be specified.</p>
</div>
<div class="listingblock">
<div class="title">project.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">...
"targets": {
    "build": {
        "executor": "@nx/angular:webpack-browser",
        "options": {
            ...
            "scripts": ["node_modules/@webcomponents/webcomponentsjs/webcomponents-bundle.js"],
            "customWebpackConfig": {
              "path": "webpack.config.js"
            },
            // TODO: Replace "./YOUR_ASSETS_FOLDER" with the path to your projects asset folder.
            "assets": [
              {
                "glob": "**/*",
                "input": "./YOUR_ASSETS_FOLDER",
                "output": "assets"
              },
              ...
            ]
        },
        ...
        "configurations": {
            "production": {
              ...
              "customWebpackConfig": {
                "path": "webpack.prod.config.js"
              }
            },
            ...
        }
    },
    "serve": {
        "builder": "@nx/angular:dev-server",
        ...
    },
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-entrypoints"><a class="anchor" href="#create-entrypoints"></a>Create app entrypoint files</h3>
<div class="paragraph">
<p>To enable an app to run both as a standalone application and as a microfrontend, it&#8217;s necessary to provide separate entry points for remote and standalone consumption. This guide will focus on the creation of the remote/microfrontend entrypoints and doesn&#8217;t require any changes to an Angular apps default entrypoints (app.module.ts, app.component.ts etc.). For instructions on how to prepare a migrated OneCX application and its entrypoints for standalone consumption see the <a href="#standalone-mode">Standalone Mode</a> section of this document.</p>
</div>
<div class="sect3">
<h4 id="create-entrypoint-component"><a class="anchor" href="#create-entrypoint-component"></a>Create app-entrypoint-component</h4>
<div class="paragraph">
<p>This component will serve as the root entrypoint of the application, when served as a microfrontend.</p>
</div>
<div class="sect4">
<h5 id="create-entrypoint-component-html"><a class="anchor" href="#create-entrypoint-component-html"></a>Create <code>src/app/app-entrypoint.component.html</code></h5>
<div class="paragraph">
<p>To provide a router outlet at the root of the exposed microfrontend the components HTML must contain the default Angular router-outlet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;router-outlet&gt;&lt;/router-outlet&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="create-entrypoint-component-ts"><a class="anchor" href="#create-entrypoint-component-ts"></a>Create <code>src/app/app-entrypoint.component.ts</code></h5>
<div class="paragraph">
<p>Alongside the created HTML file the following TypeScript file should be created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { Component } from '@angular/core'
@Component({
  selector: 'app-root',
  templateUrl: './app-entrypoint.component.html'
})
export class AppEntrypointComponent {}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="create-entrypoint-module"><a class="anchor" href="#create-entrypoint-module"></a>Create remote module <code>src/app/remote.module.ts</code></h4>
<div class="paragraph">
<p>To declare the entrypoint component and provide a root module for the microfrontend (equivalent to app.module), a separate module has to be created. It serves as sort of a replacement for the normal <code>app.module.ts</code> file which will be treated as the application root in the microfrontend context and enables specific module configuration for the different use-cases. Additionally it exposes the previously mentioned entrypoint component as a web component. Apart from the microfrontend specific code, the module should also include all essential imports, providers etc. that would normally be included in the <code>app.module.ts</code> file.</p>
</div>
<div class="paragraph">
<p>To ensure a correct loading of the application microfrontend and a connection between the app&#8217;s router and the OneCX router, the module must at least include the following code (<code>ocx-test-component</code> should be replaced with whatever name makes sense for the application that is being migrated):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { APP_INITIALIZER, DoBootstrap, Injector, NgModule } from '@angular/core'
import { RouterModule, Routes, Router } from '@angular/router'
import { BrowserModule } from '@angular/platform-browser'
import { BrowserAnimationsModule } from '@angular/platform-browser/animations'
import { createAppEntrypoint, initializeRouter, startsWith } from '@onecx/angular-webcomponents'
import { AppStateService } from '@onecx/angular-integration-interface'
import { AppEntrypointComponent } from './app-entrypoint.component'
// TODO: Replace with application routes
const routes: Routes = [
  {
    matcher: startsWith(''),
    loadChildren: () =&gt; import('./feature/feature.module').then((m) =&gt; m.FeatureModule)
  },
  {
    matcher: startsWith('additional'),
    loadChildren: () =&gt; import('./feature2/feature2.module').then((m) =&gt; m.FeatureModule)
  }
]
@NgModule({
  declarations: [AppEntrypointComponent],
  imports: [
    BrowserModule,
    BrowserAnimationsModule,
    RouterModule.forRoot(routes),
  ],
  providers: [
    {
      provide: APP_INITIALIZER,
      useFactory: initializeRouter,
      multi: true,
      deps: [Router, AppStateService]
    }
  ]
})
export class RemoteModule implements DoBootstrap {
  constructor(private readonly injector: Injector) {}
  ngDoBootstrap(): void {
    createAppEntrypoint(AppEntrypointComponent, 'ocx-test-component', this.injector)
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the <code>remote.module.ts</code> file provides a remote entrypoint component, called ocx-test-component, connects the remote app&#8217;s router to the OneCX router and defines two routes that each route to a different feature module.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Depending on the application this file will vary heavily and contain different providers, imports etc.. To ensure correct routing using the Angular router, instead of specifying a path for each route, a matcher should be specified using the <code>startsWith</code> function from the <a href="../../../../../../docs/current/general/implementation-details/mfe-content-loading/webcomponents.html#onecx-angular-webcomponents" class="xref page"><code>@onecx/angular-webcomponents</code></a> package.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="configure-remote-module-translation-loading"><a class="anchor" href="#configure-remote-module-translation-loading"></a>Optional: Set up <code>@ngx-translate</code> translation loading in the remote module</h4>
<div class="paragraph">
<p>To ensure correct translation loading in an application using <code>@ngx-translate</code> a few modifications have to be applied to the remote module mentioned above.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The package <code>@ngx-translate/core</code> has to be installed in the project.</p>
</li>
<li>
<p>After installing the package, it has to be added to the <code>shared</code> configuration in the <code>webpack.config.js</code> file. This ensures that the package is shared between the app and OneCX.</p>
<div class="literalblock">
<div class="content">
<pre>const config = withModuleFederationPlugin({
  ...
  shared: share({
    ...
    '@ngx-translate/core': { requiredVersion: 'auto' },
    ...
  }),
})</pre>
</div>
</div>
</li>
<li>
<p>After the initial configuration, translation files can be created and translations can be used in the app.</p>
</li>
<li>
<p>After creating the translation files, a few imports have to be added at the beginning of the remote module file.</p>
<div class="literalblock">
<div class="content">
<pre>import { addInitializeModuleGuard, AppStateService } from '@onecx/angular-integration-interface';
import { createTranslateLoader, provideTranslationPathFromMeta } from '@onecx/angular-utils'</pre>
</div>
</div>
</li>
<li>
<p>The routes passed to <code>RouterModule.forRoot()</code> must be wrapped with <code>addInitializeModuleGuard</code>. This ensures correct translation loading for each route.</p>
<div class="literalblock">
<div class="content">
<pre>imports: [
  ...
  RouterModule.forRoot(addInitializeModuleGuard(routes)),
  ...
],</pre>
</div>
</div>
</li>
<li>
<p><code>TranslateModule.forRoot()</code> has to be configured in the modules imports array or the <code>commonImports</code> array that is being shared between <code>app.module.ts</code> and the remote module. The factory function <code>createTranslateLoader</code> ensures that the correct translation files is loaded on app load.</p>
<div class="literalblock">
<div class="content">
<pre>imports: [
  ...
  TranslateModule.forRoot({
      isolate: false,
      loader: {
        provide: TranslateLoader,
        useFactory: createTranslateLoader,
        deps: [HttpClient]
      }
    }),
  ...
],</pre>
</div>
</div>
</li>
<li>
<p>The path to the applications translations has to be provided using provideTranslationPathFromMeta(import.meta.url,&#8230;&#8203;).</p>
<div class="literalblock">
<div class="content">
<pre>providers: [
  ...
  provideTranslationPathFromMeta(import.meta.url, 'assets/i18n/'),
  ...
]</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the error
"Cannot construct translation path from local file path. Please check whether the webpack configuration for importMeta is correct: <a href="https://webpack.js.org/configuration/module/#moduleparserjavascriptimportmeta"" class="bare">https://webpack.js.org/configuration/module/#moduleparserjavascriptimportmeta"</a>
appears, it means either</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the provider is used in the application and import.meta.url incorrectly resolves to a local file:// path.</p>
</li>
<li>
<p>or the application does not use provideTranslationPathFromMeta, but is likely using a newer Angular version than the shell or preloader. In this case, modules are loaded from the app&#8217;s context, which also leads to a local file:// prefix.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To fix this, this line has to be added to module.exports in the webpack.config.js:</p>
</div>
<div class="listingblock">
<div class="title">webpack.config.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">module.exports = {
 ...
  module: { parser: { javascript: { importMeta: false } } },
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Disclaimer: If any of the applications feature modules use ngx-translate features, such as the <code>translate</code> pipe, <code>TranslateModule</code> might have to be added to the feature modules imports array.</p>
</div>
</div>
<div class="sect3">
<h4 id="expose-entrypoint"><a class="anchor" href="#expose-entrypoint"></a>Create <code>remote-bootstrap.ts</code> and <code>remote-main.ts</code></h4>
<div class="paragraph">
<p>To correctly bootstrap and later expose the microfrontend application, a file called <code>src/remote-bootstrap.ts</code> has to be created with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { bootstrapModule } from '@onecx/angular-webcomponents'
import { RemoteModule } from './app/remote.module'
// TODO: Replace this with a dynamic value (e.g. from environment.ts)
const isProduction = false
bootstrapModule(RemoteModule, 'microfrontend', isProduction)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally a file called <code>src/remote-main.ts</code> should be created. This file will call the newly created bootstrap script and handle any errors. If any additional code has to be executed after a successful bootstrapping of the application, it can be placed in a .then block after the import statement and before the catch statement.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import('./remote-bootstrap').catch((err) =&gt; console.error(err))</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="bundle-entrypoint"><a class="anchor" href="#bundle-entrypoint"></a>Add newly created <code>remote-main.ts</code> to <code>files</code> in tsconfig</h4>
<div class="paragraph">
<p>To ensure that the newly created file <code>remote-main.ts</code> is part of the compiled bundle, its location has to be added to the files array in <code>tsconfig.app.json</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">"files": [
  ...
  "src/app/remote-main.ts"
],</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="webpack-configuration"><a class="anchor" href="#webpack-configuration"></a>Create Webpack config files</h3>
<div class="paragraph">
<p>After creating all necessary entrypoint files and modifying the build configuration, all that&#8217;s left to do is to configure the application to expose all necessary entrypoint code in one consumable file called remoteEntry.js. This file will be used by the OneCX platform to obtain all information, necessary to render the microfrontend version of the application.
In order to expose this file and ensure correct dependency sharing between the app and OneCX, a Webpack config file containing specific configuration properties has to be created.</p>
</div>
<div class="paragraph">
<p>The file, <code>webpack.config.js</code>, which should be placed in the root folder of the application must contain the following configuration:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This file is meant to be used as a minimal starting point. Depending on the application the contents of the file, especially the shared config, may need to be adapted.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">const { ModifyEntryPlugin } = require('@angular-architects/module-federation/src/utils/modify-entry-plugin')
const { share, withModuleFederationPlugin } = require('@angular-architects/module-federation/webpack')
const config = withModuleFederationPlugin({
  name: 'YOUR_MFE_NAME',
  filename: 'remoteEntry.js',
  exposes: {
    './RemoteModule': 'src/remote-main.ts',
  },
  shared: share({
    '@angular/core': { requiredVersion: 'auto', includeSecondaries: true },
    '@angular/common': { requiredVersion: 'auto', includeSecondaries: { skip: ['@angular/common/http/testing'] } },
    '@angular/common/http': { requiredVersion: 'auto', includeSecondaries: true },
    '@angular/forms': { requiredVersion: 'auto', includeSecondaries: true },
    '@angular/platform-browser': { requiredVersion: 'auto', includeSecondaries: true },
    '@angular/router': { requiredVersion: 'auto', includeSecondaries: true },
    rxjs: { requiredVersion: 'auto', includeSecondaries: true },
    '@onecx/angular-integration-interface': { requiredVersion: 'auto', includeSecondaries: true },
    '@onecx/angular-utils': { requiredVersion: 'auto', includeSecondaries: true },
    '@onecx/angular-webcomponents': { requiredVersion: 'auto', includeSecondaries: true },
  }),
})
config.devServer = { allowedHosts: 'all' }
const plugins = config.plugins.filter((plugin) =&gt; !(plugin instanceof ModifyEntryPlugin))
module.exports = {
  ...config,
  plugins,
  output: { uniqueName: 'YOUR_MFE_NAME', publicPath: 'auto' },
  experiments: { ...config.experiments, topLevelAwait: true },
  optimization: { runtimeChunk: false, splitChunks: false }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To allow for a custom Webpack configuration in production environments it&#8217;s a good practice to additionally create a <code>webpack.prod.js</code> file that will extend the base config:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">module.exports = require('./webpack.config')</code></pre>
</div>
</div>
<div class="paragraph">
<p>If necessary, this file can be used to overwrite or extend the contents of the base config with production specific values.</p>
</div>
</div>
<div class="sect2">
<h3 id="environment-file"><a class="anchor" href="#environment-file"></a>Add environment file <code>env.json</code></h3>
<div class="paragraph">
<p>During the loading of an app, OneCX will try to load it&#8217;s environment file. To avoid any errors, a file called <code>env.json</code> should be accessible at <a href="http://localhost:4200/assets/env.json" class="bare">http://localhost:4200/assets/env.json</a>. This can be achieved by adding the respective file to the assets folder of the application. The file can be used to pass environment variables to OneCX. For now it can just contain an empty object (<code>{}</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="test-remote-entrypoint"><a class="anchor" href="#test-remote-entrypoint"></a>Verify that the app is exposing a remote entry point</h3>
<div class="paragraph">
<p>After completing all steps listed above, the application should be ready to be used as a microfrontend in the OneCX platform. After starting the application with its start command (e.g. <code>npm start</code>), the applications entrypoint file (remoteEntry.js) should be accessible at <a href="http://localhost:4200/remoteEntry.js" class="bare">http://localhost:4200/remoteEntry.js</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="standalone-mode"><a class="anchor" href="#standalone-mode"></a>Standalone Mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After completing all steps mentioned in this document, a previously existing "vanilla" Angular application should be runnable as a microfrontend in OneCX. If the app additionally has to support running in standalone (e.g. in local development), a few additional steps are necessary. All steps required for running an app in standalone are covered in the separate <a href="../enable-standalone/index.html" class="xref page">Enable OneCX app to run in standalone</a> cookbook.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="further-reading"><a class="anchor" href="#further-reading"></a>Further Reading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For more information on how OneCX loads microfrontends and utilizes web components for content rendering, refer to the <a href="../../../../../../docs/current/general/implementation-details/mfe-content-loading/index.html" class="xref page">Microfrontend Content Loading in OneCX</a> and <a href="../../../../../../docs/current/general/implementation-details/mfe-content-loading/webcomponents.html" class="xref page">Web Components in OneCX</a> pages of the OneCX Docs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="troubleshooting-compilation-error"><a class="anchor" href="#troubleshooting-compilation-error"></a>Compilation error <code>TypeError: The 'compilation' argument must be an instance of Compilation</code></h3>
<div class="paragraph">
<p>If you encounter the above mentioned error you might be using multiple conflicting <code>webpack</code> versions in your project. To verify that this is the case, first run <code>npm ls webpack</code>. If this command returns a list of multiple <strong>different</strong> versions of <code>webpack</code>, please modify your <code>package.json</code> file to resolve the version mismatches (change version or install webpack dependency if it doesn&#8217;t exist yet). In our case it helped to set the version to a fixed version (5.94.0), as this was the exact version that one other package tried to use as a peer dependency.</p>
</div>
</div>
</div>
</div>
  </article>  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../../../../_/js/site.js" data-ui-root-path="../../../../../../_"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script>
    document.addEventListener('readystatechange', event => {
    if (event.target.readyState === "complete") {
        renderAllBpmnJs();
    }
    });    
</script>
  </body>
</html>
